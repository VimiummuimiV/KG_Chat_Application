// ==UserScript==
// @name         KG_Chat_Application
// @namespace    klavogonki
// @version      1.0.0
// @description  Enhance the chat abilities
// @author       Patcher
// @match        *://klavogonki.ru/*
// @exclude      https://klavogonki.ru/g/?gmid=*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=klavogonki.ru
// @grant        none
// ==/UserScript==

(()=>{"use strict";var e={21:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),i=t.n(r),a=t(314),o=t.n(a)()(i());o.push([e.id,".emoji-panel.help-panel {\n  background: #1e1e1e;\n  /* Dark background similar to emoji panel */\n  border: 1px solid #333 !important;\n  /* Subtle border */\n  padding: 1em;\n  /* Proper padding */\n  border-radius: 0.4em !important;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  color: #deb887 !important;\n  /* Text color */\n  font-family: sans-serif;\n  position: relative;\n  z-index: 1100;\n  width: 80%;\n  max-width: 600px;\n  margin: 1em auto;\n  /* Center horizontally with margin */\n  overflow-y: auto;\n}\n\n/* Header styling */\n.help-header {\n  margin-top: 0;\n  font-size: 1.5em;\n  text-align: center;\n  color: #ffa500 !important;\n}\n\n/* Subheader styling – now further differentiated */\n.help-subheader {\n  margin: 0.8em 0 0.3em 1em;\n  /* Added left margin of 1em */\n  font-size: 1.1em;\n  /* Smaller than header */\n  color: #ffcc00 !important;\n  font-weight: normal;\n  text-align: left;\n}\n\n/* Header for a specific section */\n.help-section-header {\n  margin-top: 0;\n  font-size: 1.1em;\n  text-align: center;\n  color: #ffa500 !important;\n}\n\n/* Subheader for a specific section (different type) */\n.help-section-subheader {\n  margin: 0.8em 0 0.3em 1em;\n  /* left margin added */\n  font-size: 0.9em;\n  color: #ffcc00 !important;\n  font-weight: normal;\n  text-align: left;\n}\n\n/* List styling */\n.help-list {\n  list-style-type: none;\n  padding-left: 0;\n}\n\n/* List item styling */\n.help-list-item {\n  margin-bottom: 0.5em;\n  padding: 0.3em;\n  border-bottom: 1px dashed #444 !important;\n}\n\n.help-list-item:last-child {\n  border-bottom: none;\n}\n\n/* Hotkey text styling – updated to force command description wrap */\n.help-hotkey {\n  width: fit-content;\n  display: flex;\n  margin-bottom: 0.3em;\n  color: #7ed4ff;\n  font-family: monospace;\n  background-color: rgba(126, 212, 255, 0.1);\n  border: 1px solid rgba(126, 212, 255, 0.4);\n  border-left: 3px solid rgba(126, 212, 255, 0.4);\n  padding: 2px 4px;\n  margin-right: 1em;\n}",""]);const s=o},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var p=t(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(m);else{var h=i(m,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:h,references:1})}o.push(u)}return o}function i(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=t(a[o]);n[s].references--}for(var c=r(e,i),l=0;l<a.length;l++){var d=t(a[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}a=c}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&o[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),n.push(d))}},n}},498:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),i=t.n(r),a=t(314),o=t.n(a)()(i());o.push([e.id,':root {\n  --emoji-font: "Twemoji Mozilla", "Twemoji", "Segoe UI Emoji", "NotoColorEmoji", "Apple Color Emoji", "Android Emoji", "EmojiSymbols", "EmojiOne", "Segoe UI Symbol", "Symbola", "Quivira", "BabelStone Han", "Noto Sans Symbols", "Noto Sans CJK JP", "Noto Sans CJK KR", "Noto Sans CJK SC", "Noto Sans CJK TC", "Noto Sans CJK HK", "Noto Sans CJK TW", "Noto Sans CJK VN", "Noto Sans CJK", "Noto Sans", "sans-serif";\n}\n\n.emoji-panel {\n  position: absolute !important;\n  top: 50% !important;\n  left: 50% !important;\n  transform: translate(-50%, -50%) !important;\n  background: #1e1e1e !important;\n  border: 1px solid #333 !important;\n  border-radius: 0.4em !important;\n  width: 380px;\n  height: 600px;\n  display: flex;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.15s ease-out;\n  flex-direction: column;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;\n  z-index: 1000;\n}\n\n.emoji-panel.visible {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.emoji-search-container {\n  padding: 1em !important;\n  border: none !important;\n}\n\n.emoji-search {\n  width: 100%;\n  padding: 8px;\n  border-radius: 4px;\n  background: #2a2a2a !important;\n  border: none !important;\n  border-radius: 0.2em !important;\n  color: #deb887 !important;\n  caret-color: #deb887 !important;\n  font-size: 0.9em !important;\n}\n\n.emoji-search:focus {\n  outline: none;\n  border-color: #666;\n}\n\n.emoji-categories {\n  position: sticky !important;\n  top: 0 !important;\n  display: flex !important;\n  flex-direction: row !important;\n  padding: 4px 4px 6px 4px !important;\n  border-bottom: 1px solid #333 !important;\n  gap: 2px !important;\n  justify-content: center !important;\n  overflow-x: auto !important;\n  scrollbar-width: thin !important;\n}\n\n.emoji-category-btn {\n  font-family: var(--emoji-font) !important;\n  position: relative !important;\n  background: none !important;\n  border: none !important;\n  padding: 6px !important;\n  cursor: pointer !important;\n  opacity: 0.7 !important;\n  transition: opacity 0.2s !important;\n  font-size: 1.5em !important;\n  min-width: 32px !important;\n  height: 32px !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  border-bottom: 2px solid transparent !important;\n}\n\n/* Active category button gets a 3px {color} border */\n.emoji-category-btn.active {\n  opacity: 1;\n  border-bottom: 3px solid goldenrod !important;\n}\n\n.emoji-container {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden !important;\n  padding: 8px;\n  display: block;\n  /* Using block to allow sections stacking */\n  width: 100% !important;\n  max-width: 100% !important;\n}\n\n.emoji-category-section {\n  margin-bottom: 10px;\n}\n\n.emoji-category-header {\n  padding: 8px !important;\n  color: #deb887 !important;\n  font-size: 0.9em !important;\n  position: sticky !important;\n  top: -10px !important;\n  background: #1e1e1e !important;\n  z-index: 1 !important;\n  border-bottom: 1px solid #333 !important;\n  width: 100% !important;\n  box-sizing: border-box !important;\n  margin: 0 !important;\n}\n\n.emoji-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(32px, 1fr)) !important;\n  gap: 4px;\n  align-content: start;\n}\n\n.emoji-btn {\n  /* Set priority to Twemoji Mozilla font first, then fallback to other emoji fonts */\n  font-family: var(--emoji-font) !important;\n  background: none;\n  border: none;\n  padding: 4px !important;\n  cursor: pointer;\n  font-size: 1.5em !important;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n  width: 100% !important;\n  height: 100% !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  aspect-ratio: 1 !important;\n}\n\n.emoji-btn:hover {\n  background-color: #333;\n}\n\n.emoji-footer {\n  border-top: 1px solid #333 !important;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 5px;\n}\n\n/* Info panel fixed at bottom with a 50px height */\n.emoji-info-panel {\n  height: 40px !important;\n  padding: 8px !important;\n  display: flex !important;\n  align-items: center !important;\n  gap: 8px !important;\n  color: #deb887 !important;\n  font-size: 0.9em !important;\n  background: #1e1e1e !important;\n}\n\n.emoji-language-select {\n  border-radius: 0.4em !important;\n  /* Rounded corners */\n  padding: 5px 10px;\n  /* Space inside the select */\n  font-size: 14px;\n  /* Font size for readability */\n  background-color: #2a2a2a !important;\n  /* Dark background to match search input */\n  border: 1px solid #444 !important;\n  /* Subtle dark border */\n  color: #deb887 !important;\n  /* Text color to match headers and info panel */\n  cursor: pointer;\n  /* Pointer cursor to indicate it\'s clickable */\n  transition: border-color 0.3s ease;\n  /* Smooth transition for border color */\n}\n\n/* Focus state */\n.emoji-language-select:focus {\n  outline: none;\n  /* Remove default outline */\n  border-color: goldenrod !important;\n  /* Match active category button */\n}\n\n/* Hover state */\n.emoji-language-select:hover {\n  border-color: #666 !important;\n  /* Lighten border on hover */\n}\n\n/* Optional: Style for options (limited control) */\n.emoji-language-select option {\n  font-size: 14px;\n  /* Match font size */\n  background-color: #2a2a2a !important;\n  /* Dark background for options */\n  color: #deb887 !important;\n  /* Text color for options */\n}\n\n.emoji-info-icon {\n  font-family: var(--emoji-font) !important;\n  font-size: 1.5em !important;\n}\n\n.emoji-info-keywords {\n  color: #888 !important;\n  font-style: italic !important;\n}\n\n/* Scrollbar styling */\n.emoji-container::-webkit-scrollbar,\n.emoji-categories::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n.emoji-container::-webkit-scrollbar-track,\n.emoji-categories::-webkit-scrollbar-track {\n  background: #1e1e1e;\n}\n\n.emoji-container::-webkit-scrollbar-thumb,\n.emoji-categories::-webkit-scrollbar-thumb {\n  background: #444;\n  border-radius: 3px;\n}\n\n.emoji-container::-webkit-scrollbar-thumb:hover,\n.emoji-categories::-webkit-scrollbar-thumb:hover {\n  background: #555;\n}',""]);const s=o},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},919:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),i=t.n(r),a=t(314),o=t.n(a)()(i());o.push([e.id,'/* Variables */\n:root {\n  --border-radius: 0.2em;\n  --min-chat-width: 420px;\n  --min-chat-height: 200px;\n  --user-list-width: fit-content;\n  --emoji-font: "Twemoji Mozilla", "Twemoji", "Segoe UI Emoji", "NotoColorEmoji", "Apple Color Emoji", "Android Emoji", "EmojiSymbols", "EmojiOne", "Segoe UI Symbol", "Symbola", "Quivira", "BabelStone Han", "Noto Sans Symbols", "Noto Sans CJK JP", "Noto Sans CJK KR", "Noto Sans CJK SC", "Noto Sans CJK TC", "Noto Sans CJK HK", "Noto Sans CJK TW", "Noto Sans CJK VN", "Noto Sans CJK", "Noto Sans", "sans-serif";\n}\n\n/* Main chat container */\n#app-chat-container {\n  border-radius: 0.4em 0.4em 0 0 !important;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  height: 300px;\n  background: #1e1e1e !important;\n  border: 1px solid #333 !important;\n  display: flex;\n  font-family: sans-serif;\n  color: #deb887 !important;\n  z-index: 999;\n  min-width: var(--min-chat-width) !important;\n  min-height: var(--min-chat-height) !important;\n  box-sizing: border-box;\n  max-width: 100vw;\n  overflow: hidden;\n  transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n/* Chat container states */\n#app-chat-container.maximized {\n  position: fixed;\n  z-index: 1010;\n}\n\n#app-chat-container:not(.visible-chat):not(.hidden-chat):not(.maximized):not(.floating-chat) {\n  display: none;\n  opacity: 0;\n}\n\n#app-chat-container.visible-chat {\n  transform: translateY(0) !important;\n}\n\n#app-chat-container.hidden-chat {\n  opacity: 1;\n  transform: translateY(calc(100% - 25px)) !important;\n}\n\n#app-chat-container.floating-chat {\n  border-radius: 0.4em !important;\n}\n\n/* Responsive styles */\n@media (max-width: 780px) {\n  #app-chat-container .user-list-container {\n    display: none !important;\n  }\n\n  #app-chat-container .chat-wrapper {\n    width: 100% !important;\n    border-right: none !important;\n  }\n}\n\n@media (max-width: 550px) {\n  #app-chat-container .message {\n    flex-direction: column !important;\n    margin-bottom: 1em !important;\n  }\n}\n\n/* Font size control */\n#app-chat-container .font-size-control {\n  position: absolute !important;\n  top: 0 !important;\n  left: 0 !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  height: 25px !important;\n  padding: 0 10px !important;\n  gap: 5px !important;\n  z-index: 6 !important;\n}\n\n#app-chat-container .font-size-label {\n  color: #deb887 !important;\n  cursor: default !important;\n  user-select: none !important;\n}\n\n#app-chat-container .font-size-label.small {\n  font-size: 0.8em !important;\n}\n\n#app-chat-container .font-size-label.large {\n  font-size: 1.2em !important;\n}\n\n#app-chat-container .font-size-slider {\n  width: 80px !important;\n  height: 4px !important;\n  -webkit-appearance: none !important;\n  appearance: none !important;\n  background: #333 !important;\n  outline: none !important;\n  border-radius: 2px !important;\n  transition: opacity 0.2s !important;\n}\n\n#app-chat-container .font-size-slider::-webkit-slider-thumb {\n  -webkit-appearance: none !important;\n  appearance: none !important;\n  width: 10px !important;\n  height: 10px !important;\n  border-radius: 50% !important;\n  background: #deb887 !important;\n  cursor: pointer !important;\n}\n\n#app-chat-container .font-size-slider::-moz-range-thumb {\n  width: 10px !important;\n  height: 10px !important;\n  border-radius: 50% !important;\n  background: #deb887 !important;\n  cursor: pointer !important;\n  border: none !important;\n}\n\n/* Resize handles */\n#app-chat-container .resize-handle {\n  position: absolute !important;\n  background: transparent !important;\n  z-index: 1000 !important;\n}\n\n#app-chat-container .resize-handle.top {\n  top: -3px !important;\n  left: 0 !important;\n  right: 0 !important;\n  height: 6px !important;\n  cursor: ns-resize !important;\n}\n\n#app-chat-container .resize-handle.left {\n  left: -3px !important;\n  top: 0 !important;\n  bottom: 0 !important;\n  width: 6px !important;\n  cursor: ew-resize !important;\n}\n\n#app-chat-container .resize-handle.right {\n  right: -3px !important;\n  top: 0 !important;\n  bottom: 0 !important;\n  width: 6px !important;\n  cursor: ew-resize !important;\n}\n\n/* Chat wrapper: two-column layout */\n#app-chat-container .chat-wrapper {\n  display: flex !important;\n  flex-direction: row !important;\n  flex: 1 !important;\n  min-width: var(--min-chat-width) !important;\n  overflow: hidden !important;\n}\n\n/* Left column: messages & input */\n#app-chat-container .chat-content {\n  margin-top: 25px !important;\n  background: #1e1e1e !important;\n  display: flex !important;\n  flex-direction: column !important;\n  flex: 1 !important;\n  overflow: hidden !important;\n}\n\n/* Messages panel takes most of the space */\n#app-chat-container .messages-panel {\n  flex: 1 !important;\n  overflow-y: auto !important;\n  overflow-x: hidden !important;\n  padding: 1em !important;\n  display: flex !important;\n  flex-direction: column !important;\n  gap: 0.6em !important;\n}\n\n/* Input container at bottom */\n#app-chat-container .input-container {\n  display: flex !important;\n  align-items: center !important;\n  padding: 1em !important;\n  gap: 0.5em !important;\n  border-top: 1px solid #333 !important;\n}\n\n#app-chat-container #message-input {\n  flex: 1 !important;\n  background: #2a2a2a !important;\n  color: #deb887 !important;\n  padding: 0.5em !important;\n  border-radius: var(--border-radius) !important;\n  min-width: 0 !important;\n  border: none !important;\n  position: relative;\n  font-family: inherit !important;\n  /* Remove any fixed font-size to properly inherit from container */\n  line-height: normal !important;\n  transition: font-size 0.2s ease !important;\n}\n\n#app-chat-container #message-input.private-mode {\n  background-color: #ff6b6b38 !important;\n  color: #ff6b6b !important;\n  caret-color: #ff6b6b !important;\n}\n\n#app-chat-container #message-input.private-mode::placeholder {\n  color: #ff6b6b99;\n}\n\n#app-chat-container #messages-panel.private-mode::after {\n  content: "🔒";\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  font-size: 10px;\n  opacity: 0.5;\n}\n\n/* Right column: user list container */\n#app-chat-container .user-list-container {\n  margin-top: 25px;\n  width: var(--user-list-width) !important;\n  min-width: 180px !important;\n  max-width: var(--user-list-width) !important;\n  overflow-y: auto !important;\n  overflow-x: hidden !important;\n  padding: 1em !important;\n  background: #1e1e1e !important;\n  border-left: 1px solid #333 !important;\n}\n\n/* Message styles */\n#app-chat-container .message {\n  display: flex;\n  flex-direction: row;\n  padding: 0.08em 0.8em !important;\n  border-radius: var(--border-radius) !important;\n  width: fit-content !important;\n  max-width: 100% !important;\n  word-break: break-word !important;\n}\n\n#app-chat-container .message-text .emoji-adjuster {\n  font-family: var(--emoji-font) !important;\n  font-size: 1.5em !important;\n  margin: 0 0.1em !important;\n  display: inline-flex !important;\n}\n\n#app-chat-container .message.system {\n  background-color: #ffa50020 !important;\n  border: 1px solid #ffa60030 !important;\n  border-left: 3px solid #ffa500 !important;\n}\n\n#app-chat-container .message.system .time {\n  margin-right: unset !important;\n  color: #ffa50060 !important;\n}\n\n#app-chat-container .message.system .username {\n  display: none !important;\n}\n\n#app-chat-container .message.system .message-text {\n  color: #ffa500 !important;\n}\n\n#app-chat-container .message.sent {\n  background: #00ff0020 !important;\n  border: 1px solid #00ff0030 !important;\n  border-left: 3px solid #00ff00 !important;\n}\n\n#app-chat-container .message.sent .time {\n  color: #00ff0060 !important;\n}\n\n#app-chat-container .message.sent .username,\n#app-chat-container .message.sent .message-text {\n  color: #00ff00 !important;\n}\n\n#app-chat-container .message.received {\n  background-color: #ff4d4d20 !important;\n  border: 1px solid #ff4d4d30 !important;\n  border-left: 3px solid #ff4d4d !important;\n}\n\n#app-chat-container .message.received .time {\n  color: #ff4d4d60 !important;\n}\n\n#app-chat-container .message.received .username,\n#app-chat-container .message.received .message-text {\n  color: #ff4d4d !important;\n}\n\n/* Private message styling */\n.message.private-message {\n  background-color: #ffdcdc20;\n  border-left: 3px solid #ff6b6b50;\n}\n\n.message.private-message .message-text {\n  color: #ff6b6b !important;\n}\n\n.message.private-message:not(.sent) {\n  animation: privateMessagePulse 2s ease-in-out 1;\n}\n\n/* Sent private message styling */\n.message.private-message.sent {\n  background: #293e2938 !important;\n  border: 1px solid #293e2959 !important;\n}\n\n/* Received private message styling */\n.message.private-message.received {\n  background-color: #1e1e1e26 !important;\n  border: 1px solid #33333359 !important;\n}\n\n/* Add a subtle animation for received private messages */\n@keyframes privateMessagePulse {\n  0% {\n    background-color: #ffdcdc26;\n  }\n\n  50% {\n    background-color: #ffdcdc4d;\n  }\n\n  100% {\n    background-color: #ffdcdc26;\n  }\n}\n\n#app-chat-container .message-info {\n  margin-right: 1em !important;\n  white-space: nowrap !important;\n}\n\n/* Ensure time and username elements maintain their relative sizes */\n#app-chat-container .message-info .time {\n  font-size: 0.9em !important;\n  margin-right: 1em !important;\n  color: #666 !important;\n}\n\n#app-chat-container .username {\n  font-size: 1em !important;\n}\n\n/* Add to existing style.css content */\n#app-chat-container .message-info .username,\n#app-chat-container .user-info .username {\n  cursor: pointer !important;\n  transition: opacity 0.2s ease !important;\n}\n\n#app-chat-container .message-info .username:hover,\n#app-chat-container .user-info .username:hover {\n  opacity: 0.7 !important;\n}\n\n#app-chat-container .message-info .time {\n  margin-right: 1em !important;\n  font-size: 0.9em !important;\n  color: #666 !important;\n}\n\n/* User list item styles */\n#app-chat-container .user-item {\n  display: flex !important;\n  align-items: center !important;\n  padding: 0.2em !important;\n  margin-bottom: 0.2em !important;\n  border-radius: var(--border-radius) !important;\n  max-width: 100% !important;\n  text-overflow: ellipsis !important;\n}\n\n#app-chat-container .user-avatar {\n  display: flex !important;\n  justify-content: center !important;\n  align-items: center !important;\n  width: 24px !important;\n  height: 24px !important;\n  font-size: 18px !important;\n  border-radius: 0.1em !important;\n  margin-right: 1em !important;\n  text-align: center !important;\n  line-height: 24px !important;\n  flex-shrink: 0 !important;\n}\n\n#app-chat-container .user-avatar.image-avatar {\n  cursor: pointer !important;\n  transform-origin: left !important;\n  transition: transform 0.15s ease-out !important;\n}\n\n#app-chat-container .user-avatar.image-avatar:hover {\n  transform: scale(2) !important;\n}\n\n#app-chat-container .user-avatar.svg-avatar {\n  filter: grayscale(0.5) !important;\n}\n\n#app-chat-container .user-info {\n  flex: 1 !important;\n  min-width: 0 !important;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n}\n\n#app-chat-container .user-meta {\n  cursor: default;\n  font-size: 0.8em !important;\n  color: #b0b0b0 !important;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n}\n\n#app-chat-container .game-link {\n  color: #deb887 !important;\n  text-decoration: none !important;\n  transition: color 0.15s !important;\n}\n\n#app-chat-container .role-moderator {\n  color: #ff7e7e !important;\n}\n\n#app-chat-container .role-participant {\n  color: #7ed4ff !important;\n}\n\n#app-chat-container .role-visitor {\n  color: #b0b0b0 !important;\n}\n\n#app-chat-container .role.participant {\n  filter: brightness(0.6) !important;\n}\n\n#app-chat-container .role.visitor {\n  filter: brightness(0.8) !important;\n}\n\n/* Header toggle button */\n#app-chat-container .header-button {\n  cursor: pointer !important;\n  position: absolute !important;\n  top: 0 !important;\n  width: 25px !important;\n  height: 25px !important;\n  z-index: 5 !important;\n}\n\n#app-chat-container .filled-button {\n  border: none !important;\n  background-color: transparent !important;\n  transition: all 0.15s ease-out;\n}\n\n#app-chat-container .filled-button:hover {\n  filter: brightness(1.2) !important;\n}\n\n#app-chat-container .emoji-trigger {\n  height: 28px !important;\n  width: 28px !important;\n  font-size: 1.5em !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  line-height: 1 !important;\n  /* Ensure the emoji is vertically centered */\n}\n\n#app-chat-container .emoji-trigger::before {\n  transform-origin: center !important;\n  transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;\n  content: "🙂";\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  line-height: 1 !important;\n  /* Ensure the emoji is vertically centered */\n}\n\n/* on hover, rotate the emoji trigger smoothly */\n#app-chat-container .emoji-trigger:hover {\n  filter: none !important;\n  transform: rotate(180deg) !important;\n}\n\n#app-chat-container .chat-toggle-button {\n  right: 0 !important;\n}\n\n/* Maximize button positioning and styling */\n.chat-maximize-button {\n  right: 25px !important;\n}\n\n/* Drag area for floating the chat */\n#app-chat-container .chat-drag-area {\n  border-radius: 0.4em 0.4em 0 0 !important;\n  position: absolute !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  height: 25px !important;\n  cursor: move !important;\n  background-color: #161616cc !important;\n}\n\n/* Dimming background style */\n.dimming-element {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #00000080;\n  z-index: 1010 !important;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n/* convertImageLinksToImage */\n.clickable-thumbnail {\n  opacity: 1;\n  transition: opacity 0.15s ease-in-out;\n  border: none;\n  max-width: 150px !important;\n  max-height: 150px !important;\n  cursor: pointer;\n  background-color: transparent;\n  padding: 2px;\n  margin: 6px;\n  overflow-y: auto;\n}\n\n.clickable-thumbnail img {\n  border-radius: var(--border-radius) !important;\n  object-fit: contain;\n  height: 100%;\n  width: 100%;\n}\n\n.clickable-thumbnail:hover {\n  opacity: 0.8;\n}\n\n.scaled-thumbnail {\n  top: 50%;\n  left: 50%;\n  transform-origin: center center;\n  transform: translate(-50%, -50%) scale(1);\n  position: fixed;\n  opacity: 0;\n  z-index: 1015 !important;\n  transform-origin: center center;\n  max-height: 90vh;\n  max-width: 90vw;\n  cursor: pointer;\n  border-radius: 0.6em !important;\n  box-shadow: 0 4px 6px #0000004d, 0 1px 3px #00000047 !important;\n}\n\n/* convertVideoLinksToPlayer */\n.video-wrapper {\n  display: flex;\n  flex-direction: column;\n}\n\n.video-wrapper .processed-video {\n  margin-bottom: 0.6em !important;\n}\n\n.video-container {\n  border-radius: 0.4em !important;\n  display: flex;\n  border: none;\n  height: 200px !important;\n  width: 356px !important;\n}',""]);const s=o}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(72),i=t.n(r),a=t(825),o=t.n(a),s=t(659),c=t.n(s),l=t(56),d=t.n(l),u=t(540),p=t.n(u),m=t(113),h=t.n(m),g=t(919),f={};f.styleTagTransform=h(),f.setAttributes=d(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=p();i()(g.A,f);g.A&&g.A.locals&&g.A.locals;const y="https://klavogonki.ru",b=`${y}/xmpp-httpbind/`,v={get username(){const e=localStorage.getItem("klavoauth");return e?JSON.parse(e).username:""},get password(){const e=localStorage.getItem("klavoauth");return e?JSON.parse(e).password:""}},w=["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😜","😝","😛","🤑","🤗","🤔","🤐","🤨","😣","😥","😮","🤯","😳","😱","😨","😰","😢","🤪","😵","😲","🤤","😷","🤒","🤕","🤢","🤧","😇","🥳","🥺","😬","😴","😌","🤥","🥴","🥵","🥶","🤧","🤭","🤫","😠","😡","😳","😞","😟","😕","🐱","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐶","🐭","🐹","🐰","🦊","🐻","🐼","🐨","🐯","🦁","🐮","🐷","🐸","🐵","🙈","🙉","🙊","🐔","🦄"];let k={bigImageEvents:{}};const x=["klavogonki.ru","youtube.com","youtu.be","imgur.com","pikabu.ru","userapi.com","ibb.co","yaplakal.com","freepik.com"];class E{constructor({username:e,password:n,bindUrl:t,delay:r=1e3}){this.username=e,this.password=n,this.bindUrl=t,this.delay=r,this.sid=null,this.rid=Math.floor(Date.now()/1e3)}nextRid(){return++this.rid}async sendRequest(e){const n=await fetch(this.bindUrl,{method:"POST",headers:{"Content-Type":"text/xml; charset=UTF-8","User-Agent":"Mozilla/5.0"},body:e});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.text()}async sendRequestWithRetry(e,n=5){let t,r=this.delay;for(let i=1;i<=n;i++)try{return await this.sendRequest(e)}catch(e){if(t=e,!e.message.includes("429"))throw e;{const e=r*Math.pow(2,i);console.log(`⏱️ Rate limited (attempt ${i}/${n}). Waiting ${e}ms...`),await this.sleep(e)}}throw new Error(`Max retries reached. Last error: ${t.message}`)}sleep(e){return new Promise((n=>setTimeout(n,e)))}base64Encode(e){const n=(new TextEncoder).encode(e);return btoa(String.fromCharCode(...n))}async connect(){console.log("🌐 Step 1: Connecting to XMPP server...");const e=`<body xmlns='http://jabber.org/protocol/httpbind'\n               rid='${this.nextRid()}'\n               to='jabber.klavogonki.ru'\n               xml:lang='en'\n               wait='60'\n               hold='1'\n               ver='1.6'\n               xmpp:version='1.0'\n               xmlns:xmpp='urn:xmpp:xbosh'/>`,n=await this.sendRequestWithRetry(e);this.sid=n.match(/sid=['"]([^'"]+)['"]/)[1],console.log(`🔑 Step 2: Session ID received: ${this.sid}`),await this.sleep(this.delay/8),console.log("🔐 Step 3: Authenticating...");const t=this.base64Encode("\0"+this.username+"\0"+this.password),r=`<body rid='${this.nextRid()}' sid='${this.sid}'\n               xmlns='http://jabber.org/protocol/httpbind'>\n          <auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='PLAIN'>${t}</auth>\n        </body>`;if(!(await this.sendRequestWithRetry(r)).includes("<success"))throw new Error("❌ Authentication failed");console.log("✅ Step 4: Authentication successful!"),await this.sleep(this.delay/8),console.log("🔄 Step 5: Restarting stream...");const i=`<body rid='${this.nextRid()}' sid='${this.sid}'\n               xmlns='http://jabber.org/protocol/httpbind'\n               to='jabber.klavogonki.ru'\n               xmpp:restart='true'\n               xmlns:xmpp='urn:xmpp:xbosh'/>`;await this.sendRequestWithRetry(i),await this.sleep(this.delay/8),console.log("📦 Step 6: Binding resource...");const a=`<body rid='${this.nextRid()}' sid='${this.sid}'\n               xmlns='http://jabber.org/protocol/httpbind'>\n          <iq type='set' id='bind_1' xmlns='jabber:client'>\n            <bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'>\n              <resource>web</resource>\n            </bind>\n          </iq>\n        </body>`;await this.sendRequestWithRetry(a),await this.sleep(this.delay/8),console.log("🔌 Step 7: Establishing session...");const o=`<body rid='${this.nextRid()}' sid='${this.sid}'\n               xmlns='http://jabber.org/protocol/httpbind'>\n          <iq type='set' id='session_1' xmlns='jabber:client'>\n            <session xmlns='urn:ietf:params:xml:ns:xmpp-session'/>\n          </iq>\n        </body>`;return await this.sendRequestWithRetry(o),await this.sleep(this.delay/8),{sid:this.sid,rid:this.rid}}}const j=["jpg","jpeg","png","gif","webp"],S="📸",C="🖥️",L="💀️️",I=.2,z=10,$=.1;let M=0,T=!1,P=[],N=null;const A=e=>{const n=(e=>{try{return e.match(/\.([^?#.]+)(?:[?#]|$)/i)?.[1]?.toLowerCase()||""}catch(e){return console.error("Error extracting extension:",e.message),""}})(e);return{allowed:j.includes(n),extension:n}},H=(e,n)=>{const t=document.createElement("img");t.src=e,t.classList.add("scaled-thumbnail"),document.body.appendChild(t),M=n;let r=1,i=!1,a=0,o=0,s=0,c=0;let l=document.querySelector(".dimming-element");l||(l=document.createElement("div"),l.classList.add("dimming-element"),document.body.appendChild(l));const d=e=>{pe(e,"hide","0"),!document.querySelector(".popup-panel")&&l&&pe(l,"hide","0"),ue()};return k.bigImageEvents.click=e=>{t.contains(e.target)||(t.remove(),ue())},k.bigImageEvents.keydown=e=>{"Escape"===e.code||"Space"===e.code?(e.preventDefault(),d(t)):"ArrowLeft"===e.code?R(-1):"ArrowRight"===e.code&&R(1)},k.bigImageEvents.wheel=e=>{const n=e.deltaY<0?1:-1;r+=n*$*r,r=Math.max(I,Math.min(r,z)),t.style.transform=`translate(-50%, -50%) translate(${s}px, ${c}px) scale(${r})`},k.bigImageEvents.mousemove=e=>{if(i){if(e.ctrlKey){const n=e.clientY-o,t=n<0?1:-1,i=Math.abs(n)*$*.05;r+=t*i*r,r=Math.max(I,Math.min(r,z))}else{const n=(e.clientX-a)/r*5,t=(e.clientY-o)/r*5;s+=n,c+=t}t.style.transform=`translate(-50%, -50%) translate(${s}px, ${c}px) scale(${r})`,a=e.clientX,o=e.clientY}},k.bigImageEvents.mousedown=e=>{const{button:n,clientX:r,clientY:s,target:c,ctrlKey:l}=e;(0!==n&&2!==n||c===t)&&(0===n?R(-1):2===n?(e.preventDefault(),l?(navigator.clipboard.writeText(c.src).catch(console.error),d(t)):R(1)):1===n&&(i=!0,a=r,o=s,e.preventDefault()))},k.bigImageEvents.mouseup=e=>{1===e.button&&(i=!1)},k.bigImageEvents.contextmenu=e=>e.preventDefault(),Object.entries(k.bigImageEvents).forEach((([e,n])=>{document.addEventListener(e,n)})),pe(l,"show","1"),l.addEventListener("click",(()=>{d(t)})),t},R=e=>{const n=M+e;n>=0&&n<P.length&&!T&&(T=!0,N&&(N.src=P[n].imgSrc),setTimeout((()=>T=!1),50),M=n)};function q(e){const n=document.getElementById("messages-panel");if(!n)return;const t=n.querySelectorAll("a:not(.skipped):not(.processed-image)");function r(e,t){const r=document.createElement("div");r.classList.add("clickable-thumbnail"),r.dataset.sourceLink=e.href;const i=document.createElement("img");i.src=e.href,i.onload=()=>{r.appendChild(i),e.parentNode.insertBefore(r,e.nextSibling)},i.onerror=()=>{console.error("Failed to load image:",e.href),e.classList.add("skipped")},t?e.querySelector(".clickable-thumbnail")||e.addEventListener("click",(n=>{e.querySelector(".clickable-thumbnail")||(r.appendChild(i),e.parentNode.insertBefore(r,e.nextSibling))})):(r.appendChild(i),e.parentNode.insertBefore(r,e.nextSibling)),r.addEventListener("click",(t=>{t.stopPropagation(),P=[],n.querySelectorAll(".clickable-thumbnail").forEach(((e,n)=>{const t=e.querySelector("img");t&&e.dataset.sourceLink&&P.push({link:e.dataset.sourceLink,imgSrc:t.src,index:n})}));const r=P.findIndex((n=>n.link===e.href||n.imgSrc===i.src));N=H(i.src,r>=0?r:0),pe(N,"show","1");const a=document.querySelector(".dimming-element");a&&pe(a,"show","1")}))}t.length&&t.forEach((e=>{if(!e.href||!e.href.startsWith("http"))return;const{allowed:n,extension:t}=A(e.href);if(!n)return;e.classList.add("media");const{isTrusted:i,domain:a}=me(e.href);e.title=he(e.href)?ge(e.href):e.href,i?function(e,n,t){e.textContent=`${S} Image (${n.toUpperCase()}) ${C} Hostname (${t})`,e.classList.add("processed-image"),r(e,!1)}(e,t,a):function(e,n,t){e.classList.add("skipped"),e.textContent=`${S} Image (${n.toUpperCase()}) ${C} Hostname (${t}) ${L} Untrusted`,e.addEventListener("click",(n=>{e.classList.contains("processed-image")||(n.preventDefault(),e.classList.remove("skipped"),e.classList.add("processed-image"),r(e,!0))}))}(e,t,a)}))}const B="🎥",K="🖥️",U="💀️️",_=["mp4","webm","ogg","mov","avi"];function D(e){const n=document.getElementById("messages-panel");if(!n)return;const t=n.querySelectorAll("a:not(.skipped):not(.processed-video)");function r(e,n,t,r){const{youtubeMatch:i,videoType:a,videoId:o}=r,s=(e=>{const n=e.match(/\.([^?#.]+)(?:[?#]|$)/i)?.[1]?.toLowerCase()||"";return{allowed:_.includes(n),extension:n}})(n);if(!i&&!s.allowed)return;e.classList.add("processed-video");const c=document.createElement("div");c.classList.add("video-wrapper");const l=document.createElement(i?"iframe":"video");l.classList.add("video-container"),e.textContent=`${B} ${a} ${K} Hostname (${t})`,i?(l.src=`https://www.youtube.com/embed/${o}`,l.allowFullscreen=!0):(l.src=n,l.controls=!0),e.title=he(n)?ge(n):n,e.style.display="inline-flex",e.parentNode.insertBefore(c,e),c.append(e,l)}t.length&&t.forEach((e=>{const n=e.href;if(!n)return;const t=function(e){const n=e.match(/(?:shorts\/|live\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);if(n){return{youtubeMatch:!0,videoId:n[1],videoType:e.includes("shorts/")?"Shorts":e.includes("live/")?"Live":e.includes("watch?v=")?"Watch":e.includes("youtu.be/")?"Share":"YouTube"}}const t=e.split(".").pop().toLowerCase();if(_.includes(t))return{youtubeMatch:!1,videoType:`Video (${t.toUpperCase()})`};return!1}(n);if(!t)return;e.classList.add("media");const{isTrusted:i,domain:a}=me(n);if(!i)return e.classList.add("skipped"),e.textContent=`${B} ${t.videoType} ${K} Hostname (${a}) ${U} Untrusted`,void e.addEventListener("click",(i=>{e.classList.contains("processed-video")||(i.preventDefault(),e.classList.remove("skipped"),r(e,n,a,t))}));r(e,n,a,t)}))}const J="http://www.w3.org/2000/svg",F="#82B32A",O="#B34A2A",W=`\n  <svg xmlns="${J}" \n      width="24" \n      height="24" \n      viewBox="0 0 250 250">\n    <path fill="#096AD9" d="M22.32 98.04l-19.04 -87.15c-0.75,-3.46 0.48,-6.84 3.29,-9 2.81,-2.17 6.39,-2.49 9.55,-0.87l225.95 116.02c3.07,1.57 4.87,4.52 4.87,7.96 0,3.44 -1.8,6.39 -4.87,7.96l-225.95 116.02c-3.16,1.62 -6.74,1.3 -9.55,-0.87 -2.81,-2.16 -4.04,-5.54 -3.29,-9l19.04 -87.15c0.79,-3.62 3.53,-6.26 7.18,-6.91l102.6 -18.19c0.91,-0.16 1.56,-0.94 1.56,-1.86 0,-0.92 -0.65,-1.7 -1.56,-1.86l-102.6 -18.19c-3.65,-0.65 -6.39,-3.29 -7.18,-6.91z"/>\n  </svg>\n`,V=`\n  <svg xmlns="${J}" \n       width="15" \n       height="15" \n       viewBox="0 0 250 250" \n       style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd">\n      <path fill="${F}" d="M46.62 0l156.76 0c25.64,0 46.62,20.98 46.62,46.62l0 156.75c0,25.65 -20.98,46.63 -46.62,46.63l-156.76 0c-25.64,0 -46.62,-20.98 -46.62,-46.63l0 -156.75c0,-25.64 20.98,-46.62 46.62,-46.62zm45.71 70.24l32.67 32.67 32.67 -32.67c2.73,-2.73 7.18,-2.73 9.91,0l12.18 12.18c2.73,2.73 2.73,7.18 0,9.91l-32.67 32.67 32.67 32.66c2.73,2.74 2.73,7.19 0,9.92l-12.18 12.18c-2.73,2.73 -7.18,2.73 -9.91,0l-32.67 -32.67 -32.67 32.67c-2.73,2.73 -7.18,2.73 -9.91,0l-12.18 -12.18c-2.73,-2.73 -2.73,-7.18 0,-9.92l32.67 -32.66 -32.67 -32.67c-2.73,-2.73 -2.73,-7.18 0,-9.91l12.18 -12.18c2.73,-2.73 7.18,-2.73 9.91,0z"/>\n  </svg>\n`,Q=`\n  <svg xmlns="${J}" \n       width="15" \n       height="15" \n       viewBox="0 0 250 250" \n       style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd">\n      <path fill="${O}" d="M46.62 0l156.76 0c25.64,0 46.62,20.98 46.62,46.62l0 156.75c0,25.65 -20.98,46.63 -46.62,46.63l-156.76 0c-25.64,0 -46.62,-20.98 -46.62,-46.63l0 -156.75c0,-25.64 20.98,-46.62 46.62,-46.62zm15.5 135.79l57.92 -57.93c2.73,-2.73 7.19,-2.72 9.92,0.01l57.92 57.92c2.73,2.73 2.73,7.18 0,9.91l-12.18 12.18c-2.73,2.73 -7.18,2.73 -9.92,0l-35.82 -35.83c-2.73,-2.73 -7.19,-2.73 -9.92,0l-35.82 35.83c-2.74,2.73 -7.19,2.73 -9.92,0l-12.18 -12.18c-2.73,-2.73 -2.73,-7.18 0,-9.91z"/>\n  </svg>\n`,Y=`\n  <svg xmlns="${J}" \n       width="15" \n       height="15" \n       viewBox="0 0 250 250"\n       style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd">\n    <path fill="${F}" d="M46.62 0l156.76 0c25.64,0 46.62,20.98 46.62,46.62l0 156.75c0,25.65 -20.98,46.63 -46.62,46.63l-156.76 0c-25.64,0 -46.62,-20.98 -46.62,-46.63l0 -156.75c0,-25.64 20.98,-46.62 46.62,-46.62zm109.99 181.69l-75.07 0c-7.3,0 -13.23,-5.92 -13.23,-13.22l0 -75.08c0,-2.35 1.92,-4.28 4.28,-4.28l17.9 0c2.35,0 4.27,1.93 4.27,4.28l0 32.81c0,1.77 1.01,3.28 2.64,3.96 1.63,0.67 3.42,0.33 4.66,-0.93l59.68 -59.68c1.67,-1.65 4.38,-1.65 6.05,0l12.66 12.66c1.66,1.67 1.66,4.38 0,6.05l-59.68 59.68c-1.26,1.24 -1.6,3.03 -0.93,4.66 0.68,1.63 2.19,2.64 3.96,2.64l32.81 0c2.35,0 4.28,1.92 4.28,4.28l0 17.9c0,2.36 -1.93,4.28 -4.28,4.28z"/>\n  </svg>\n`,X=`\n  <svg xmlns="${J}" \n       width="15" \n       height="15" \n       viewBox="0 0 250 250"\n       style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd">\n    <path fill="${O}" d="M46.62 0l156.76 0c25.64,0 46.62,20.98 46.62,46.62l0 156.75c0,25.65 -20.98,46.63 -46.62,46.63l-156.76 0c-25.64,0 -46.62,-20.98 -46.62,-46.63l0 -156.75c0,-25.64 20.98,-46.62 46.62,-46.62zm46.77 68.31l75.07 0c7.3,0 13.23,5.92 13.23,13.22l0 75.08c0,2.35 -1.92,4.28 -4.28,4.28l-17.9 0c-2.35,0 -4.27,-1.93 -4.27,-4.28l0 -32.81c0,-1.77 -1.01,-3.28 -2.64,-3.96 -1.63,-0.67 -3.42,-0.33 -4.66,0.93l-59.68 59.68c-1.67,1.65 -4.38,1.65 -6.05,0l-12.66 -12.66c-1.66,-1.67 -1.66,-4.38 0,-6.05l59.68 -59.68c1.26,-1.24 1.6,-3.03 0.93,-4.66 -0.68,-1.63 -2.19,-2.64 -3.96,-2.64l-32.81 0c-2.35,0 -4.28,-1.92 -4.28,-4.27l0 -17.9c0,-2.36 1.93,-4.28 4.28,-4.28z"/>\n  </svg>\n`;function G(e){return{hueMap:{},hueStep:e.hueStep||30,maxHue:e.maxHue||360,saturation:e.saturation||"80%",lightness:e.lightness||"50%",getColor(e){let n=this.hueMap[e];if(!n){const t=this.maxHue/this.hueStep;n=Math.floor(Math.random()*t)*this.hueStep,this.hueMap[e]=n}return`hsl(${n}, ${this.saturation}, ${this.lightness})`}}}const Z=G({maxHue:210,hueStep:30,saturation:"80%",lightness:"50%"}),ee=G({maxHue:210,hueStep:30,saturation:"80%",lightness:"50%"});let ne=null;function te(){let e;do{e=w[Math.floor(Math.random()*w.length)]}while(e===ne);return ne=e,e}function re(){const e=document.querySelector("#app-chat-container .chat-wrapper");if(!e)return;const n=document.querySelector("#app-chat-container"),t=e.offsetWidth<=780,r=n.classList.contains("maximized"),i=document.querySelector("#app-chat-container .user-list-container");i&&(i.style.display=t&&!r?"none":""),document.querySelectorAll("#app-chat-container .message").forEach((e=>{e.style.flexDirection=t&&!r?"column":"row",e.style.marginBottom=t&&!r?"1em":"0"}))}function ie(){const e=document.getElementById("app-chat-container"),n=document.querySelector(".chat-toggle-button");if(!e||!n)return;const t=ae(),r=window.innerWidth,i=window.innerHeight,a=getComputedStyle(document.documentElement),o=parseInt(a.getPropertyValue("--min-chat-width"))||250,s=parseInt(a.getPropertyValue("--min-chat-height"))||200;e.style.width=Math.min(r,Math.max(o,t.width))+"px",e.style.height=Math.min(i,Math.max(s,t.height))+"px",e.style.left=le(t.left,0,r-e.offsetWidth)+"px",t.floating?(e.style.top=le(t.top,0,i-e.offsetHeight)+"px",e.style.bottom="",e.classList.add("floating-chat"),e.style.display=t.isVisible?"flex":"none",e.style.opacity=t.isVisible?"1":"0",n.innerHTML=t.isVisible?V:Q):(e.style.bottom="0",e.style.top="",e.classList.remove("floating-chat"),e.classList.remove("visible-chat","hidden-chat"),e.classList.add(t.isVisible?"visible-chat":"hidden-chat"),n.innerHTML=t.isVisible?V:Q),re()}function ae(){const e=localStorage.getItem("chatState"),n={height:300,width:Math.min(window.innerWidth,600),left:0,floating:!1,top:window.innerHeight-300,isVisible:!0,fontSizeMultiplier:1};return e?{...n,...JSON.parse(e)}:n}function oe(e){const n=document.getElementById("app-chat-container"),t=document.getElementById("message-input");if(!n)return;n.style.fontSize=`${e}em`,t&&(t.style.fontSize="1em");ce({...ae(),fontSizeMultiplier:e})}function se(){oe(ae().fontSizeMultiplier)}function ce(e){localStorage.setItem("chatState",JSON.stringify(e))}function le(e,n,t){return Math.min(Math.max(e,n),t)}function de(e){return"string"!=typeof e?e:e.replace(/^\d+#/,"")}function ue(){Object.entries(k.bigImageEvents).forEach((([e,n])=>{document.removeEventListener(e,n)}))}function pe(e,n,t){e&&(e.offsetHeight,e.style.transition="opacity 0.3s",e.style.opacity="show"===n?t:"0","hide"===n&&e.addEventListener("transitionend",(()=>{"0"===e.style.opacity&&e.remove()}),{once:!0}))}const me=e=>{try{const{hostname:n}=new URL(e),t=n.toLowerCase().split(".").slice(-2).join(".");return{isTrusted:x.includes(t),domain:t}}catch(n){return console.error("Error in isTrustedDomain:",n.message),{isTrusted:!1,domain:e}}};function he(e){return/^https?:\/\//.test(e)&&/%[0-9A-Fa-f]{2}/.test(e)}function ge(e){const[n]=e.split("#");return decodeURIComponent(n).replace(/ /g,"_")}function fe(){const e=document.getElementById("messages-panel");if(!e)return;const n=localStorage.getItem("mentionKeywords");if(!n)return;let t;try{if(t=JSON.parse(n),!Array.isArray(t))return}catch(e){return}const r=new WeakSet;e.querySelectorAll(".message-text").forEach((e=>{const n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>{if(r.has(e))return NodeFilter.FILTER_SKIP;return e.parentElement.closest(".mention, .time, .username")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),i=[];let a;for(;a=n.nextNode();)i.push(a);i.forEach((e=>{r.has(e)||(!function(e,n){const t=/(@?[\wа-яА-ЯёЁ'-]+)|[\s]+|[^@\s\wа-яА-ЯёЁ'-]+/gu,r=e.textContent.match(t)||[],i=document.createDocumentFragment();r.forEach((e=>{if(n.some((n=>0===n.localeCompare(e,void 0,{sensitivity:"accent"})))){const n=document.createElement("span");n.className="mention",e.split("").forEach((e=>{const t=document.createElement("span");t.style.color=ee.getColor(e),t.textContent=e,n.appendChild(t)})),i.appendChild(n)}else i.appendChild(document.createTextNode(e))})),e.parentNode.replaceChild(i,e)}(e,t),r.add(e))}))}))}let ye=!0;const be=600;function ve(){const e=document.getElementById("messages-panel");if(e)if(ye)e.scrollTop=e.scrollHeight,ye=!1;else{e.scrollHeight-e.scrollTop-e.clientHeight<=be&&(e.scrollTop=e.scrollHeight)}}function we(e,n={}){const t=document.querySelector(".chat-drag-area");if(!t)return;const r=t.querySelector(".chat-dynamic-alert");r&&t.removeChild(r);const i={type:"info",duration:3e3,...n},a={info:"#2196F3",warning:"#FF9800",error:"#F44336",success:"#4CAF50"},o=document.createElement("div");o.className="chat-dynamic-alert",o.innerHTML=e,o.style.cssText=`\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: ${a[i.type]||a.info};\n    padding: 5px 10px;\n    border-radius: 3px;\n    z-index: 1000;\n    font-family: Roboto, Montserrat;\n    font-size: 10px;\n    font-weight: normal;\n    box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n    opacity: 0;\n  `,t.appendChild(o),requestAnimationFrame((()=>{o.style.transition="all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55)",o.style.opacity="1",o.style.transform="translate(-50%, -50%)",setTimeout((()=>{o.style.transition="transform 0.05s ease-in-out",[{x:5,delay:0},{x:-7,delay:50},{x:9,delay:100},{x:-6,delay:150},{x:4,delay:200},{x:-3,delay:250},{x:0,delay:300}].forEach((e=>{setTimeout((()=>{o.style.transform=`translate(calc(-50% + ${e.x}px), -50%)`}),e.delay)}))}),300),setTimeout((()=>{o.style.transition="opacity 0.3s ease-in-out",o.style.opacity="0",setTimeout((()=>{t.removeChild(o)}),300)}),i.duration)}))}function ke(){const e=document.getElementById("app-chat-container"),n=document.getElementById("message-input");return!(!n||!e||"none"===e.style.display)&&(n.focus(),!0)}async function xe(e){const n=`https://klavogonki.ru/api/profile/search-users?query=${encodeURIComponent(e)}`;try{const t=await async function(e){const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch ${e}`);return n.json()}(n);if(!t.all?.length)throw new Error(`User ${e} not found.`);const r=t.all.find((n=>n.login===e));if(!r)throw new Error(`Exact match for user ${e} not found.`);return r.id}catch(n){return console.error("Error getting user ID:",n),we(`Could not find user "${e}"`,{type:"error",duration:5e3}),null}}const Ee={isPrivateMode:!1,targetUsername:null,targetId:null,fullJid:null,async setPrivateTarget(e){if(!e)return this.exitPrivateMode(),!1;try{const n=await xe(e);return!!n&&(this.isPrivateMode=!0,this.targetUsername=e,this.targetId=n,this.fullJid=`${n}#${e}@jabber.klavogonki.ru/web`,!0)}catch(e){return console.error("Error setting private target:",e),!1}},exitPrivateMode(){this.isPrivateMode=!1,this.targetUsername=null,this.targetId=null,this.fullJid=null}};async function je(e){if(!e)return;const n=e.value,t=/^\/pm\s+([\wа-яА-ЯёЁ]+)\s/,r=n.match(t);if(r){const i=r[1];await Ee.setPrivateTarget(i)?(!function(e){const n=document.getElementById("message-input");Ee.isPrivateMode&&Ee.targetUsername!==e&&Se();n.classList.contains("private-mode")&&Ee.targetUsername===e?Ee.targetUsername===e&&(n.placeholder=`️PM to ➡ ${e}`,we(`Private chat with ${e} activated`,{type:"warning",duration:3e3})):(n.classList.add("private-mode"),n.placeholder=`PM to ➡ ${e}`,we(`Private chat with ${e} activated`,{type:"warning",duration:3e3}),Ee.isPrivateMode=!0,Ee.targetUsername=e)}(i),e.value=n.replace(t,"")):(we(`Could not find user "${i}"`,{type:"error",duration:3e3}),Se())}else/^\/exit\s*$/.test(n)&&(Se(),e.value="")}function Se(){const e=document.getElementById("message-input");e.classList.contains("private-mode")&&(e.classList.remove("private-mode"),e.placeholder="",Ee.exitPrivateMode(),we("Exited private chat mode",{type:"success",duration:3e3}))}class Ce{constructor(e="user-list"){this.container=document.getElementById(e),this.activeUsers=new Map,this.isFirstLoad=!0,this.roleIcons={visitor:"🐥",participant:"🗿",moderator:"⚔️️"},this.rolePriority={moderator:1,participant:2,visitor:3},this.setupEventListeners()}setupEventListeners(){this.container.addEventListener("click",(e=>{if(e.target.classList.contains("username-clickable")){const n=e.target.getAttribute("data-user-id");if(n){const e=n.split("/")[1].split("#")[0];window.location.href=`https://klavogonki.ru/u/#/${e}/`}}if(e.target.closest(".game-indicator")){const n=e.target.closest(".game-indicator").getAttribute("data-game-id");n&&(e.stopPropagation(),window.location.href=`https://klavogonki.ru/g/?gmid=${n}`)}}))}updatePresence(e){const n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("presence");if(e.includes('<presence id="pres_1"'))return console.log("🔄 Initial room join detected, requesting full roster"),void this.requestFullRoster();let t=!1;const r=[],i=[];for(let e=0;e<n.length;e++){const a=n[e],o=a.getAttribute("from");if("unavailable"===a.getAttribute("type")){this.activeUsers.has(o)&&(console.log(`🚪 User left: ${this.activeUsers.get(o).login||o}`),this.activeUsers.delete(o),t=!0);continue}let s=null;const c=a.getElementsByTagName("x");for(let e=0;e<c.length;e++)if("klavogonki:userdata"===c[e].namespaceURI){s=c[e];break}if(!s){console.log(`⚠️ No klavogonki:userdata found for presence from: ${o}`);continue}const l=s.getElementsByTagName("user")[0];if(!l){console.log(`⚠️ No user node found in klavogonki:userdata for presence from: ${o}`);continue}const d=de(l.getElementsByTagName("login")[0]?.textContent||"Anonymous"),u=l.getElementsByTagName("avatar")[0]?.textContent,p=l.getElementsByTagName("background")[0]?.textContent||"#777",m=s.getElementsByTagName("game_id")[0]?.textContent||null,h=l.getElementsByTagName("moderator")[0],g=h&&"1"===h.textContent,f=a.getElementsByTagName("item")[0];let y=f?.getAttribute("role")||"participant";g&&(y="moderator");const b={jid:o,login:d,avatar:u,color:p,role:y,usernameColor:Z.getColor(d),gameId:m},v=this.activeUsers.get(o);v?JSON.stringify(v)!==JSON.stringify(b)&&(console.log(`👤 User updated: ${d}`),this.activeUsers.set(o,b),t=!0,i.push(o)):(console.log(`👤 User joined: ${d}`),this.activeUsers.set(o,b),t=!0,r.push(o))}t&&this.updateUI(r,i)}updateUI(e=[],n=[]){const t=new Map;this.container.querySelectorAll(".user-item").forEach((e=>{t.set(e.getAttribute("data-jid"),e)}));const r=Array.from(this.activeUsers.values()).sort(((e,n)=>{const t=this.rolePriority[e.role]-this.rolePriority[n.role];return 0!==t?t:e.login.localeCompare(n.login)})),i=document.createDocumentFragment();r.forEach((e=>{let n=t.get(e.jid);if(n){t.delete(e.jid);const r=n.querySelector(".role"),i=this.roleIcons[e.role]||"👤";r&&(r.textContent!==i&&(r.textContent=i),r.classList.contains(e.role)||(r.className=`role ${e.role}`))}else{n=document.createElement("div"),n.classList.add("user-item"),n.setAttribute("data-jid",e.jid);const t=de(e.login),r=this.roleIcons[e.role]||"👤";let i="";if(e.avatar)try{i=`<img class="user-avatar image-avatar" src="${`${y}${e.avatar.replace(".png","_big.png")}`}" alt="${t}'s avatar" \n              onerror="this.onerror=null; this.classList.add('fallback-avatar'); this.innerHTML='${te()}'">`}catch(e){console.error(`Error loading avatar for ${t}:`,e),i=`<span class="user-avatar svg-avatar">${te()}</span>`}else i=`<span class="user-avatar svg-avatar">${te()}</span>`;n.innerHTML=`\n          ${i}\n          <div class="user-info">\n            <div class="username" style="color: ${e.usernameColor}">\n              <span class="username-clickable" data-user-id="${e.jid}">${t}</span>\n              <span class="role ${e.role}">${r}</span>\n            </div>\n          </div>\n        `}let r=n.querySelector(".game-indicator");if(e.gameId){if(!r||r.getAttribute("data-game-id")!==e.gameId){const t=`<span class="game-indicator" title="${e.gameId}" data-game-id="${e.gameId}">\n                                      <span class="traffic-icon">🚦</span>\n                                    </span>`;if(r)r.outerHTML=t;else{n.querySelector(".username").insertAdjacentHTML("beforeend",t)}}}else r&&r.remove();i.appendChild(n)})),this.container.innerHTML="",this.container.appendChild(i),t.forEach(((e,n)=>{e.remove()})),this.isFirstLoad||e.forEach((e=>{const n=this.container.querySelector(`.user-item[data-jid="${e}"]`);var t;n&&((t=n).classList.add("shake-effect"),setTimeout((()=>{t.classList.remove("shake-effect")}),500))})),this.isFirstLoad&&(this.isFirstLoad=!1)}async requestFullRoster(){console.log("📑 Would request full roster here (using existing data for now)"),this.updateUI()}}class Le{constructor(e="messages-panel",n=""){this.panel=document.getElementById(e),this.messages=[],this.messageIdCounter=0,this.currentUsername=n,this.sentMessageTexts=new Set,this.processedMessageIds=new Set,this.chatHistory=new Map}processMessages(e){if(!e||"string"!=typeof e)return;const n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("message");let t=!1;Array.from(n).forEach((e=>{const n=e.getAttribute("id")||"msg_"+this.messageIdCounter++;if(this.processedMessageIds.has(n))return;const r=e.getElementsByTagName("body")[0];if(r&&r.textContent){const i=r.textContent;if("This room is not anonymous"===i.trim())return;const a=e.getAttribute("from"),o=e.getAttribute("to"),s="chat"===e.getAttribute("type"),c=de(a&&a.split("#")[1]?.split("@")[0]||"unknown");let l=null;s&&o&&(l=o.split("#")[1]?.split("@")[0]||o,l=de(l));let d=(new Date).toISOString();const u=e.getElementsByTagName("delay");u.length>0&&u[0].getAttribute("stamp")&&(d=u[0].getAttribute("stamp"));if(!(!s&&c===this.currentUsername&&this.sentMessageTexts.has(i))){const e={id:n,from:c,text:i,timestamp:d,isPrivate:s,recipient:l};this.messages.push(e),this.chatHistory.set(n,e),this.processedMessageIds.add(n),t=!0}}})),t&&this.updatePanel()}addSentMessage(e,n={}){this.sentMessageTexts.add(e);const t=`msg_${Date.now()}`,r={id:t,from:this.currentUsername,text:e,timestamp:(new Date).toISOString(),isPrivate:n.isPrivate||!1,recipient:n.recipient||null};if(this.messages.push(r),this.chatHistory.set(t,r),this.processedMessageIds.add(t),this.updatePanel(),this.sentMessageTexts.size>20){const e=Array.from(this.sentMessageTexts);for(let n=0;n<e.length-20;n++)this.sentMessageTexts.delete(e[n])}}updatePanel(){if(!this.panel)return;this.messages.sort(((e,n)=>new Date(e.timestamp)-new Date(n.timestamp)));const e=new Set(Array.from(this.panel.querySelectorAll(".message")).map((e=>e.getAttribute("data-message-id"))));this.messages.forEach((n=>{if(!e.has(n.id)){const e=new Date(n.timestamp).toLocaleTimeString("en-GB",{hour12:!1}),t=Z.getColor(n.from),r=document.createElement("div");r.className="message",n.isPrivate&&(r.classList.add("private-message"),r.classList.add(n.from===this.currentUsername?"sent":"received"),n.recipient&&r.setAttribute("data-recipient",n.recipient)),n.text.startsWith("/me ")&&(r.classList.add("system"),n.text=`${n.from} ${n.text.substring(n.text.indexOf(" ")+1)}`),r.setAttribute("data-message-id",n.id);const i=document.createElement("div");i.className="message-info";let a=n.from;n.isPrivate&&(a=n.from===this.currentUsername&&n.recipient?`→ ${n.recipient}`:`${n.from} →`),i.innerHTML=`\n          <span class="time">${e}</span>\n          <span class="username" style="color: ${t}">${a}</span>\n        `;const o=document.createElement("div");o.className="message-text",o.innerHTML=n.text.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$1" target="_blank">$1</a>').replace(/:(\w+):/g,((e,n)=>`<img src="https://klavogonki.ru/img/smilies/${n}.gif" alt="${n}" />`)).replace(/(\p{Emoji_Presentation}|\p{Emoji}\uFE0F)/gu,'<span class="emoji-adjuster">$&</span>'),r.appendChild(i),r.appendChild(o),this.panel.appendChild(r)}})),this.addUsernameClickListeners(),fe(this.currentUsername),requestAnimationFrame((()=>{ve()}))}addUsernameClickListeners(){const e=this.panel.querySelectorAll(".username"),n=document.getElementById("message-input");e.forEach((e=>{e.addEventListener("click",(t=>{let r=e.textContent.trim();if(r.includes("→")&&(r=r.startsWith("→")?r.replace("→","").trim():r.split("→")[0].trim()),t.ctrlKey)n.value=`/pm ${r} `,je(n);else{const e=`${r}, `;n.value.includes(e)||(n.value+=e)}n.focus()}))}))}getChatHistory(){return Array.from(this.chatHistory.values())}}function Ie(){const e=document.getElementById("app-chat-container"),n=document.querySelector(".chat-toggle-button");if(!e)return;if(e.classList.contains("maximized"))return void we("Chat is currently maximized",{type:"warning",duration:1e3});const t=JSON.parse(localStorage.getItem("chatState"))||{};if(t.floating||!1){const r="0"===e.style.opacity;e.style.opacity=r?"1":"0",setTimeout((()=>{e.style.display=r?"flex":"none",n.innerHTML=r?V:Q,ce({...t,isVisible:r}),r&&ke()}),300)}else{const r=!e.classList.contains("visible-chat");e.classList.remove("visible-chat","hidden-chat"),e.classList.add(r?"visible-chat":"hidden-chat"),n.innerHTML=r?V:Q,ce({...t,isVisible:r}),r&&ke()}}function ze(){const e=document.createElement("div");e.id="app-chat-container",["top","left","right"].forEach((n=>{const t=document.createElement("div");t.className=`resize-handle ${n}`,e.appendChild(t)}));const n=document.createElement("div");n.className="chat-wrapper";const t=document.createElement("div");t.className="chat-content";const r=document.createElement("div");r.id="messages-panel",r.className="messages-panel";const i=document.createElement("div");i.className="input-container";const a=document.createElement("button");a.className="emoji-trigger filled-button",a.innerHTML=null,a.classList.add("emoji-button"),a.title="Open emoji picker";const o=document.createElement("input");o.type="text",o.id="message-input";const s=document.createElement("button");s.id="send-button",s.className="filled-button send-button",s.innerHTML=W,i.appendChild(a),i.appendChild(o),i.appendChild(s),t.appendChild(r),t.appendChild(i);const c=document.createElement("div");c.className="user-list-container";const l=document.createElement("div");l.id="user-list",c.appendChild(l),n.appendChild(t),n.appendChild(c),e.appendChild(n);const d=document.createElement("button");d.className="filled-button header-button chat-maximize-button",d.innerHTML=X,d.addEventListener("click",Me),e.appendChild(d);const u=document.createElement("button");u.className="filled-button header-button chat-toggle-button",u.innerHTML=V,u.addEventListener("click",Ie),e.appendChild(u);const p=document.createElement("div");p.className="chat-drag-area",p.addEventListener("dblclick",Ie),e.appendChild(p),document.body.appendChild(e),ie(),function(){if(!document.getElementById("app-chat-container"))return;const e=ae(),n=document.createElement("div");n.className="font-size-control";const t=document.createElement("input");t.type="range",t.min="0.8",t.max="1.5",t.step="0.1",t.value=e.fontSizeMultiplier,t.className="font-size-slider",t.addEventListener("mousedown",(e=>{e.stopPropagation()})),t.addEventListener("input",(e=>{oe(parseFloat(e.target.value))})),n.appendChild(t);const r=document.querySelector(".chat-drag-area");r&&r.appendChild(n)}(),se()}let $e=null;function Me(){const e=document.getElementById("app-chat-container"),n=document.querySelector(".chat-maximize-button");if(e)if(e.classList.contains("maximized")){const t=document.getElementById("messages-panel"),r=t.scrollHeight-t.scrollTop-t.clientHeight<=300;if(e.maximizeResizeHandler&&(window.removeEventListener("resize",e.maximizeResizeHandler),delete e.maximizeResizeHandler),$e){if(e.style.width=`${$e.width}px`,e.style.height=`${$e.height}px`,e.style.left=`${$e.left}px`,e.style.maxWidth="",e.style.minWidth="",e.style.position="fixed",e.style.right="",e.style.margin="",e.style.transform="",e.style.top="auto",$e.floating){const n=window.innerHeight,t=$e.top;t+$e.height<=n?e.style.top=`${t}px`:(e.style.bottom="0",e.style.top="auto")}else e.style.bottom="0",e.style.top="";ce({...ae(),width:$e.width,height:$e.height,left:$e.left,top:$e.top,floating:$e.floating,isVisible:$e.isVisible})}e.classList.remove("maximized"),n.classList.remove("maximized"),n.innerHTML=X,requestAnimationFrame((()=>{re(),r&&(t.scrollTop=t.scrollHeight),ke(),se()}))}else{const t=!e.classList.contains("visible-chat")&&!e.classList.contains("hidden-chat");$e=ae();const r=()=>`${Math.floor(.9*window.innerHeight)}px`;e.style.cssText=`\n      width: 100vw !important;\n      height: ${r()} !important;\n      max-width: 95vw !important;\n      min-width: 95vw !important;\n      position: fixed !important;\n      bottom: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      top: auto !important;\n      margin: 0 !important;\n      transform: none !important;\n    `,t&&e.classList.remove("visible-chat","hidden-chat"),e.classList.add("maximized"),n.classList.add("maximized"),n.innerHTML=Y;const i=()=>{e.style.height=r(),e.style.bottom="0",e.style.top="auto"};window.addEventListener("resize",i),e.maximizeResizeHandler=i,re(),ke(),se()}}let Te,Pe,Ne,Ae,He=!1;let Re,qe,Be,Ke,Ue,_e,De=!1,Je=null,Fe=0;const Oe={smileys:["😀","😃","😄","😁","😅","😂","🤣","🥲","☺️","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😚","😋","😛","😝","😜","🤪","😎","🤓","🧐","🤨","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾"],people:["👋","🤚","🖐️","✋","🖖","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👍","👎","✊","👊","🤛","🤜","👏","🙌","👐","🤲","🤝","🙏","✍️","💅","🤳","💪","🦾","🦿","🦵","🦶","👂","🦻","👃","🧠","🫀","🫁","🦷","🦴","👀","👁️","👅","👄","👶","🧒","👦","👧","🧑","👱","👨","🧔","👩","🧓","👴","👵","🙍","🙎","🙅","🙆","💁","🙋","🧏","🙇","🤦","🤷","👮","🕵️","💂","🥷","👷","🤴","👸","👳","👲","🧕","🤵","👰","🤰","🤱","👼","🎅","🤶","🦸","🦹","🧙","🧚","🧛","🧜"],nature:["🐵","🐒","🦍","🦧","🐶","🐕","🦮","🐕‍🦺","🐩","🐺","🦊","🦝","🐱","🐈","🐈‍⬛","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🦬","🐮","🐂","🐃","🐄","🐷","🐖","🐗","🐽","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🦫","🦘","🦡","🐿️","🦔","🦦","🦥","🐼","🦨","🦘","🦡","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊️","🦅","🦆","🦢","🦉","🦤","🪶","🦩","🦚","🦜","🐸","🐊","🐢","🦎","🐍","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🦭","🐟","🐠","🐡","🦈","🐙","🐚","🪸","🐌","🦋","🐛","🐜","🐝","🪲","🐞","🦗","🪳","🕷️","🕸️","🦂","🦟","🪰","🪱","🌸","💮","🏵️","🌹","🥀","🌺","🌻","🌼","🌷","🌱","🪴","🌲","🌳","🌴","🌵","🌾","🌿","☘️","🍀","🍁","🍂","🍃"],food:["🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🥕","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🫖","☕","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾"],activities:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","⛳","🪁","🎣","🤿","🎽","🛹","🛼","🛷","⛸️","🥌","⛷️","🏂","🪂","🏋️","🤼","🤸","⛹️","🤾","🏌️","🏇","🧘","🏄","🏊","🤽","🚣","🧗","🚴","🚵","🎪","🎭","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🎷","🎺","🎸","🎻","🎲","🎯","🎳","🎮","🎰","🧩","🎪","🎫","🎟️"],travel:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🛵","🏍️","🛺","🚲","🛴","✈️","🛩️","🛫","🛬","🚁","🚀","🛸","🛶","⛵","🚤","🛥️","🛳️","⛴️","🚢","🏰","🏯","🏟️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","⛪","🕌","🕍","🛕","⛩️","🏛️"],objects:["⌚","📱","💻","⌨️","🖥️","🖨️","🖱️","🖲️","🕹️","🗜️","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📞","☎️","📟","📠","📺","📻","🎙️","🎚️","🎛️","📡","🔋","🔌","💡","🔦","🕯️","🧯","🛢️","💸","💵","💴","💶","💷","🪙","💰","💳","💎","⚖️","🪜","🧰","🔧","🔨","⚒️","🛠️","⛏️","✏️","🖊️","🖋️","✒️","🖌️","🖍️","📝","📚","📖","🔖","📑","🗒️","📄","📰","🗞️","📁","📂","🗂️"],symbols:["❤️","🧡","💛","💚","💙","💜","🤎","🖤","🤍","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","⚠️","🚸","⛔","🚫","☢️","☣️","➕","➖","➗","✖️","♾️","💲","💱","⬆️","↗️","➡️","↘️","⬇️","↙️","⬅️","↖️","↕️","↔️","↩️","↪️","⤴️","⤵️","🔃","🔄","🔆","📶","🎦","🔅","♻️","✅","❌","❎","➰","➿","〽️","✳️","✴️","❇️","©️","®️","™️"],flags:["🏁","🚩","🎌","🏴","🏳️","🏳️‍🌈","🏳️‍⚧️","🏴‍☠️","🇺🇸","🇬🇧","🇯🇵","🇰🇷","🇩🇪","🇨🇳","🇧🇷","🇮🇳","🇫🇷","🇪🇸","🇮🇹","🇷🇺","🇨🇦","🇦🇺","🇳🇿"]},We={"😀":{en:["grinning","face","smile","happy","joy"],ru:["улыбающийся","лицо","улыбка","счастливый","радость"]},"😃":{en:["smiley","face","happy","joy","laugh"],ru:["улыбчивый","лицо","счастливый","радость","смех"]},"😄":{en:["laughing","face","happy","joy","grin"],ru:["смеющийся","лицо","счастливый","радость","ухмылка"]},"😁":{en:["beaming","face","grin","smile","happy"],ru:["сияющий","лицо","улыбка","счастье","радость"]},"😅":{en:["sweat","nervous","face","laugh","relief"],ru:["пот","нервный","лицо","смех","облегчение"]},"😂":{en:["tears","joy","face","laugh","happy"],ru:["слёзы","радость","лицо","смех","счастье"]},"🤣":{en:["rolling","floor","laugh","funny","amused"],ru:["катающийся","пол","смех","смешной","развлечённый"]},"🥲":{en:["smiling","tear","bittersweet","nostalgic","happy"],ru:["улыбающийся","слеза","горько-сладкий","ностальгический","счастливый"]},"☺️":{en:["smile","blush","content","peaceful"],ru:["улыбка","румянец","довольный","спокойный"]},"😊":{en:["smiling","happy","blushing","content"],ru:["улыбающийся","счастливый","румянец","довольный"]},"😇":{en:["angel","halo","innocent","saint","pure"],ru:["ангел","ореол","невинный","святой","чистый"]},"🙂":{en:["slight","smile","face","mild"],ru:["слегка","улыбка","лицо","умеренный"]},"🙃":{en:["upside-down","silly","quirky","funny"],ru:["перевернутый","глупый","странный","смешной"]},"😉":{en:["wink","flirt","playful","smile"],ru:["подмигивание","флирт","игривый","улыбка"]},"😌":{en:["relieved","calm","content","satisfied"],ru:["облегчённый","спокойный","довольный","удовлетворённый"]},"😍":{en:["heart","love","smiling","eyes","adore"],ru:["сердце","любовь","улыбающийся","глаза","обожать"]},"🥰":{en:["love","hearts","affection","adoration","cuddle"],ru:["любовь","сердца","нежность","обожание","обниматься"]},"😘":{en:["kiss","love","affection","flirt"],ru:["поцелуй","любовь","нежность","флирт"]},"😗":{en:["kiss","face","smile","affection"],ru:["поцелуй","лицо","улыбка","нежность"]},"😚":{en:["kiss","closed eyes","affection","love"],ru:["поцелуй","закрытые глаза","нежность","любовь"]},"😋":{en:["yum","delicious","tasty","savor","lick"],ru:["ням","вкусно","аппетитно","наслаждаться","лизать"]},"😛":{en:["tongue","playful","cheeky","silly"],ru:["язык","игривый","нахальный","глупый"]},"😝":{en:["tongue","silly","wacky","fun"],ru:["язык","глупый","безумный","весёлый"]},"😜":{en:["tongue","wink","playful","fun"],ru:["язык","подмигивание","игривый","весёлый"]},"🤪":{en:["crazy","wacky","zany","quirky"],ru:["сумасшедший","безумный","чудаковатый","странный"]},"😎":{en:["cool","sunglasses","confident","chill"],ru:["крутой","очки","уверенный","расслабленный"]},"🤓":{en:["nerd","geek","glasses","studious"],ru:["ботан","задрот","очки","учёный"]},"🧐":{en:["monocle","investigative","curious","thoughtful"],ru:["одноглазый","расследовательский","любопытный","задумчивый"]},"🤨":{en:["skeptical","doubtful","uncertain","raised eyebrow"],ru:["скептический","сомневающийся","неуверенный","поднятая бровь"]},"🤩":{en:["starstruck","amazed","excited","admire"],ru:["восхищённый","поражённый","взволнованный","обожать"]},"🥳":{en:["party","celebrate","birthday","festive"],ru:["вечеринка","праздновать","день рождения","праздничный"]},"😏":{en:["smirk","sly","mischievous","confident"],ru:["ухмылка","хитрый","озорной","уверенный"]},"😒":{en:["unamused","displeased","bored","sigh"],ru:["неудовлетворённый","недовольный","скучный","вздох"]},"😞":{en:["disappointed","sad","down","somber"],ru:["разочарованный","грустный","унылый","мрачный"]},"😔":{en:["pensive","sad","reflective","mournful"],ru:["задумчивый","грустный","рефлексивный","скорбный"]},"😟":{en:["worried","concerned","anxious","upset"],ru:["обеспокоенный","тревожный","беспокойный","расстроенный"]},"😕":{en:["confused","perplexed","uncertain","baffled"],ru:["смущённый","озадаченный","неуверенный","в замешательстве"]},"🙁":{en:["frowning","sad","disappointed","downcast"],ru:["хмурый","грустный","разочарованный","угнетённый"]},"☹️":{en:["frowning","sad","unhappy","mournful"],ru:["хмурый","грустный","несчастный","скорбный"]},"😣":{en:["strained","persevering","tired","discomfort"],ru:["напряжённый","терпеливый","уставший","дискомфорт"]},"😖":{en:["confounded","annoyed","distressed","exasperated"],ru:["озадаченный","раздражённый","огорчённый","изнурённый"]},"😫":{en:["tired","exhausted","weary","worn out"],ru:["усталый","измученный","изнурённый","измотанный"]},"😩":{en:["weary","tired","exhausted","overwhelmed"],ru:["изнурённый","уставший","измученный","перегруженный"]},"🥺":{en:["pleading","begging","cute","vulnerable"],ru:["умоляющий","просьба","милый","уязвимый"]},"😢":{en:["cry","sad","tear","sorrow"],ru:["плакать","грустный","слеза","печаль"]},"😭":{en:["crying","tearful","sad","heartbroken"],ru:["плачущий","со слезами","грустный","с разбитым сердцем"]},"😤":{en:["triumphant","exasperated","proud","angry"],ru:["триумфальный","раздражённый","гордый","сердитый"]},"😠":{en:["angry","mad","annoyed","irate"],ru:["сердитый","злой","раздражённый","яростный"]},"😡":{en:["pouting","mad","furious","irate"],ru:["надувшийся","злой","яростный","взбешённый"]},"🤬":{en:["cursing","swearing","angry","foul language"],ru:["ругательства","мат","сердитый","неприличный"]},"🤯":{en:["mind blown","shocked","amazed","stunned"],ru:["взрыв мозга","шокированный","поражённый","ошеломлённый"]},"😳":{en:["flushed","embarrassed","shocked","awkward"],ru:["покрасневший","смущённый","шокированный","неловкий"]},"🥵":{en:["hot","overheated","sweaty","exhausted"],ru:["горячий","перегретый","потный","изнурённый"]},"🥶":{en:["cold","freezing","chilly","frozen"],ru:["холодный","замерзающий","прохладный","замороженный"]},"😱":{en:["screaming","horror","shock","fear"],ru:["кричащий","ужас","шок","страх"]},"😨":{en:["fearful","scared","anxious","nervous"],ru:["боязливый","испуганный","тревожный","нервный"]},"😰":{en:["anxious","nervous","sweating","scared"],ru:["тревожный","нервный","потеющий","испуганный"]},"😥":{en:["disappointed","sad","pensive","teary"],ru:["разочарованный","грустный","задумчивый","со слезами"]},"😓":{en:["cold sweat","nervous","anxious","tired"],ru:["холодный пот","нервный","тревожный","усталый"]},"🤗":{en:["hug","embrace","caring","love"],ru:["объятие","принимать","заботливый","любовь"]},"🤔":{en:["thinking","pondering","curious","confused"],ru:["думающий","размышляющий","любопытный","смущённый"]},"🤭":{en:["guilty","shy","embarrassed","oops"],ru:["виноватый","застенчивый","смущённый","упс"]},"🤫":{en:["quiet","secret","hush","shh"],ru:["тихий","секрет","тишина","ш-ш"]},"🤥":{en:["lying","fib","deceitful","dishonest"],ru:["врущий","ложь","обманчивый","нечестный"]},"😶":{en:["speechless","mute","quiet","blank"],ru:["безмолвный","немой","тихий","пустой"]},"😐":{en:["neutral","expressionless","indifferent","flat"],ru:["нейтральный","без выражения","безразличный","плоский"]},"😑":{en:["deadpan","expressionless","blank","unemotional"],ru:["без эмоций","без выражения","пустой","неэмоциональный"]},"😬":{en:["grimace","awkward","nervous","tense"],ru:["гримаса","неловко","нервный","напряжённый"]},"🙄":{en:["eye roll","sarcastic","disdain","bored"],ru:["закатывание глаз","саркастичный","пренебрежительный","скучный"]},"😯":{en:["hushed","surprised","shocked","amazed"],ru:["тихий","удивлённый","шокированный","поражённый"]},"😦":{en:["frowning","dismayed","shocked","surprised"],ru:["хмурый","огорчённый","шокированный","удивлённый"]},"😧":{en:["astonished","stunned","surprised","speechless"],ru:["изумлённый","ошеломлённый","удивлённый","безмолвный"]},"😮":{en:["open mouth","surprised","shocked","amazed"],ru:["открытый рот","удивлённый","шокированный","поражённый"]},"😲":{en:["astonished","stunned","shocked","in awe"],ru:["изумлённый","ошеломлённый","шокированный","в благоговении"]},"🥱":{en:["yawning","sleepy","tired","bored"],ru:["зевота","сонный","усталый","скучный"]},"😴":{en:["sleeping","tired","napping","dozing"],ru:["спящий","усталый","дремлющий","засыпающий"]},"🤤":{en:["drooling","desire","craving","hungry"],ru:["слюнявый","желание","тяга","голодный"]},"😪":{en:["sleepy","drowsy","tired","nodding"],ru:["сонный","вялый","усталый","кивающий"]},"😵":{en:["dizzy","knocked out","stunned","confused"],ru:["головокружительный","вырубленный","ошеломлённый","сбитый с толку"]},"🤐":{en:["zipper-mouth","secretive","quiet","mute"],ru:["закрытый рот","секретный","тихий","немой"]},"🥴":{en:["woozy","tipsy","dizzy","unsteady"],ru:["ошеломлённый","подошедший","головокружительный","неустойчивый"]},"🤢":{en:["nauseated","sick","disgusted","vomit"],ru:["тошнотворный","больной","отвратительный","рвота"]},"🤮":{en:["vomiting","nauseous","sick","disgust"],ru:["рвота","тошнотворный","больной","отвратительный"]},"🤧":{en:["sneezing","ill","sick","allergy"],ru:["чихание","болен","больной","аллергия"]},"😷":{en:["mask","sick","ill","health"],ru:["маска","больной","нездоровый","здоровье"]},"🤒":{en:["fever","sick","ill","unwell"],ru:["лихорадка","больной","нездоровый","неважно"]},"🤕":{en:["injured","hurt","bandaged","pain"],ru:["раненый","повреждённый","забинтованный","боль"]},"🤑":{en:["money","rich","greedy","cash"],ru:["деньги","богатый","жадный","наличные"]},"🤠":{en:["cowboy","hat","western","fun"],ru:["ковбой","шляпа","вестерн","веселье"]},"😈":{en:["devil","mischievous","naughty","sinister"],ru:["дьявол","озорной","непослушный","зловещий"]},"👿":{en:["angry","devil","evil","fiendish"],ru:["сердитый","дьявол","злой","зловещий"]},"👹":{en:["ogre","demon","monster","scary"],ru:["огр","демон","монстр","страшный"]},"👺":{en:["goblin","troll","spooky","creepy"],ru:["гоблин","тролль","жуткий","страшный"]},"🤡":{en:["clown","silly","funny","circus"],ru:["клоун","глупый","смешной","цирк"]},"💩":{en:["poop","crap","feces","funny"],ru:["какашка","дерьмо","фекалии","смешной"]},"👻":{en:["ghost","spirit","haunted","scary"],ru:["призрак","дух","обитающий","страшный"]},"💀":{en:["skull","death","creepy","spooky"],ru:["череп","смерть","жуткий","страшный"]},"☠️":{en:["skull","danger","death","poison"],ru:["череп","опасность","смерть","яд"]},"👽":{en:["alien","extraterrestrial","space","ufo"],ru:["инопланетянин","внеземной","космос","НЛО"]},"👾":{en:["alien","monster","video game","retro"],ru:["инопланетянин","монстр","видеоигра","ретро"]},"🤖":{en:["robot","machine","tech","android"],ru:["робот","машина","технология","андроид"]},"🎃":{en:["pumpkin","halloween","spooky","festive"],ru:["тыква","Хэллоуин","жуткий","праздничный"]},"😺":{en:["smiling","cat","happy","playful"],ru:["улыбающийся","кот","счастливый","игривый"]},"😸":{en:["grinning","cat","joyful","cheerful"],ru:["широко улыбающийся","кот","радостный","весёлый"]},"😹":{en:["tearful","joy","cat","laughing"],ru:["со слезами","радость","кот","смеющийся"]},"😻":{en:["heart","cat","love","adorable"],ru:["сердце","кот","любовь","милый"]},"😼":{en:["smirking","cat","mischievous","sly"],ru:["ухмыляющийся","кот","озорной","хитрый"]},"😽":{en:["kissing","cat","affection","cute"],ru:["целующий","кот","нежность","милый"]},"🙀":{en:["surprised","cat","scared","shocked"],ru:["испуганный","кот","испуганный","шокированный"]},"😿":{en:["crying","cat","sad","tearful"],ru:["плачущий","кот","грустный","со слезами"]},"😾":{en:["angry","cat","annoyed","displeased"],ru:["сердитый","кот","раздражённый","недовольный"]},"👋":{en:["wave","hello","goodbye","greeting"],ru:["махание","привет","прощание","приветствие"]},"🤚":{en:["raised hand","stop","palm"],ru:["поднятая рука","стой","ладонь"]},"🖐️":{en:["hand","high five","greeting"],ru:["рука","дай пять","приветствие"]},"✋":{en:["stop","palm","high five"],ru:["стой","ладонь","дай пять"]},"🖖":{en:["vulcan salute","live long","sci-fi"],ru:["салют Вулканцев","живи долго","научная фантастика"]},"👌":{en:["okay","perfect","good"],ru:["ок","идеально","хорошо"]},"🤌":{en:["pinched","precise","delicious"],ru:["сжатый","точный","вкусный"]},"🤏":{en:["small","tiny","minuscule"],ru:["маленький","крошечный","микроскопический"]},"✌️":{en:["peace","victory","v sign"],ru:["мир","победа","знак победы"]},"🤞":{en:["fingers crossed","hope","luck"],ru:["скрещенные пальцы","надежда","удача"]},"🤟":{en:["I love you","rock on","sign language"],ru:["я тебя люблю","рок он","язык жестов"]},"🤘":{en:["rock","metal","horns"],ru:["рок","металл","рога"]},"🤙":{en:["call me","hang loose","shaka"],ru:["позвони мне","расслабься","шак"]},"👈":{en:["point left","direction","arrow"],ru:["указание влево","направление","стрелка"]},"👉":{en:["point right","direction","arrow"],ru:["указание вправо","направление","стрелка"]},"👆":{en:["point up","direction","up"],ru:["указание вверх","направление","вверх"]},"🖕":{en:["middle finger","offensive","rude"],ru:["средний палец","оскорбительный","грубый"]},"👇":{en:["point down","direction","down"],ru:["указание вниз","направление","вниз"]},"☝️":{en:["point up","number one","important"],ru:["указание вверх","номер один","важный"]},"👍":{en:["thumbs up","good","approve"],ru:["палец вверх","хорошо","одобрить"]},"👎":{en:["thumbs down","bad","disapprove"],ru:["палец вниз","плохо","не одобрять"]},"✊":{en:["fist","power","solidarity"],ru:["кулак","сила","солидарность"]},"👊":{en:["punch","fist bump","hit"],ru:["удар","кулачок","ударить"]},"🤛":{en:["left fist","punch","strike"],ru:["левая рука","удар","нанести удар"]},"🤜":{en:["right fist","punch","strike"],ru:["правая рука","удар","нанести удар"]},"👏":{en:["clap","applause","bravo"],ru:["хлопки","аплодисменты","браво"]},"🙌":{en:["celebrate","praise","hooray"],ru:["торжествовать","хвалить","ура"]},"👐":{en:["open hands","embrace","welcome"],ru:["раскрытые руки","объятие","добро пожаловать"]},"🤲":{en:["palms","offering","receive"],ru:["ладони","предложение","получать"]},"🤝":{en:["handshake","agreement","cooperation"],ru:["рукопожатие","соглашение","сотрудничество"]},"🙏":{en:["pray","thanks","please"],ru:["молиться","спасибо","пожалуйста"]},"✍️":{en:["writing","pen","signature"],ru:["письмо","ручка","подпись"]},"💅":{en:["nail polish","beauty","manicure"],ru:["лак для ногтей","красота","маникюр"]},"🤳":{en:["selfie","photo","camera"],ru:["селфи","фото","камера"]},"💪":{en:["flex","strong","muscle"],ru:["сгибать","сильный","мышцы"]},"🦾":{en:["mechanical arm","robotic","cyborg"],ru:["механическая рука","роботизированный","киборг"]},"🦿":{en:["mechanical leg","prosthetic","robotic"],ru:["механическая нога","протез","роботизированный"]},"🦵":{en:["leg","limb","lower body"],ru:["нога","конечность","нижняя часть тела"]},"🦶":{en:["foot","toes","step"],ru:["нога","пальцы ноги","шаг"]},"👂":{en:["ear","listening","sound"],ru:["ухо","слушание","звук"]},"🦻":{en:["hearing aid","listening","assistive"],ru:["слуховой аппарат","слушание","помощь"]},"👃":{en:["nose","smell","scent"],ru:["нос","запах","аромат"]},"🧠":{en:["brain","intelligence","mind"],ru:["мозг","интеллект","ум"]},"🫀":{en:["heart (organ)","anatomy","biology"],ru:["сердце (орган)","анатомия","биология"]},"🫁":{en:["lungs","breath","organ"],ru:["легкие","дыхание","орган"]},"🦷":{en:["tooth","dental","smile"],ru:["зуб","стоматология","улыбка"]},"🦴":{en:["bone","skeleton","hard"],ru:["кость","скелет","твердый"]},"👀":{en:["eyes","look","see"],ru:["глаза","смотреть","видеть"]},"👁️":{en:["eye","vision","watch"],ru:["глаз","зрение","наблюдать"]},"👅":{en:["tongue","taste","lick"],ru:["язык","вкус","лизать"]},"👄":{en:["lips","kiss","mouth"],ru:["губы","поцелуй","рот"]},"👶":{en:["baby","infant","cute"],ru:["младенец","ребенок","милый"]},"🧒":{en:["child","kid","youth"],ru:["ребенок","малыш","юный"]},"👦":{en:["boy","child","kid"],ru:["мальчик","ребенок","малыш"]},"👧":{en:["girl","child","kid"],ru:["девочка","ребенок","малышка"]},"🧑":{en:["person","human","individual"],ru:["человек","личность","индивид"]},"👱":{en:["blonde","person","light hair"],ru:["блондин","человек","светлые волосы"]},"👨":{en:["man","male","guy"],ru:["мужчина","мужской","парень"]},"🧔":{en:["bearded","man","facial hair"],ru:["бородатый","мужчина","борода"]},"👩":{en:["woman","female","lady"],ru:["женщина","женский","дама"]},"🧓":{en:["elderly","senior","aged"],ru:["пожилой","старший","в преклонном возрасте"]},"👴":{en:["old man","elderly","senior"],ru:["старик","пожилой","старший"]},"👵":{en:["old woman","elderly","senior"],ru:["старуха","пожилая","старшая"]},"🙍":{en:["frowning","sad","displeased"],ru:["хмурый","грустный","недовольный"]},"🙎":{en:["pouting","angry","displeased"],ru:["надувшийся","сердитый","недовольный"]},"🙅":{en:["no","prohibited","refusal"],ru:["нет","запрещено","отказ"]},"🙆":{en:["ok","acceptable","okay"],ru:["ок","приемлемо","хорошо"]},"💁":{en:["information","help","assistance"],ru:["информация","помощь","поддержка"]},"🙋":{en:["raising hand","question","volunteer"],ru:["поднимающая руку","вопрос","доброволец"]},"🧏":{en:["deaf","listening","silent"],ru:["глухой","слушающий","безмолвный"]},"🙇":{en:["bowing","apologetic","respect"],ru:["наклон","извиняющийся","уважение"]},"🤦":{en:["facepalm","disbelief","oops"],ru:["лицо ладонь","недоверие","упс"]},"🤷":{en:["shrug","uncertain","indifferent"],ru:["пожимание плечами","неуверенный","безразличный"]},"👮":{en:["police","officer","law"],ru:["полицейский","офицер","закон"]},"🕵️":{en:["detective","spy","investigate"],ru:["детектив","шпион","расследование"]},"💂":{en:["guard","soldier","military"],ru:["страж","солдат","военный"]},"🥷":{en:["ninja","stealth","assassin"],ru:["ниндзя","скрытность","ассассин"]},"👷":{en:["construction","worker","helmet"],ru:["строитель","рабочий","шлем"]},"🤴":{en:["prince","royalty","king"],ru:["принц","королевская семья","король"]},"👸":{en:["princess","royalty","queen"],ru:["принцесса","королевская семья","королева"]},"👳":{en:["turban","cultural","tradition"],ru:["тюрбан","культура","традиция"]},"👲":{en:["man with cap","cultural","traditional"],ru:["мужчина в кепке","культура","традиционный"]},"🧕":{en:["woman with headscarf","cultural","modest"],ru:["женщина в платке","культурная","скромная"]},"🤵":{en:["tuxedo","groom","formal"],ru:["смокинг","жених","официальный"]},"👰":{en:["bride","wedding","formal"],ru:["невеста","свадьба","официальный"]},"🤰":{en:["pregnant","expecting","mother"],ru:["беременная","ожидающая","мать"]},"🤱":{en:["nursing","mother","baby"],ru:["кормящая","мать","ребенок"]},"👼":{en:["angel","cherub","divine"],ru:["ангел","херувим","божественный"]},"🎅":{en:["santa","christmas","jolly"],ru:["Санта","Рождество","радостный"]},"🤶":{en:["mrs claus","christmas","holiday"],ru:["миссис Клаус","Рождество","праздник"]},"🦸":{en:["superhero","power","hero"],ru:["супергерой","сила","герой"]},"🦹":{en:["villain","bad","criminal"],ru:["злодей","плохой","преступник"]},"🧙":{en:["wizard","magic","sorcery"],ru:["волшебник","магия","колдовство"]},"🧚":{en:["fairy","magic","mystical"],ru:["фея","магия","мистический"]},"🧛":{en:["vampire","dracula","undead"],ru:["вампир","Дракула","нежить"]},"🧜":{en:["mermaid","mythical","ocean"],ru:["русалка","мифическая","океан"]},"🐵":{en:["monkey","ape","funny","mammal"],ru:["обезьяна","примат","смешной","млекопитающее"]},"🐒":{en:["monkey","primate","curious"],ru:["обезьяна","примат","любопытный"]},"🦍":{en:["gorilla","ape","strong","wild"],ru:["горилла","обезьяна","сильный","дикий"]},"🦧":{en:["orangutan","ape","wild","mammal"],ru:["орангутан","обезьяна","дикий","млекопитающее"]},"🐶":{en:["dog","puppy","pet","mammal"],ru:["собака","щенок","домашний питомец","млекопитающее"]},"🐕":{en:["dog","canine","pet"],ru:["собака","псовой","домашний питомец"]},"🦮":{en:["guide dog","service","assistance"],ru:["собака-поводырь","служебная","помощь"]},"🐕‍🦺":{en:["service dog","working","assistance"],ru:["служебная собака","рабочая","помощь"]},"🐩":{en:["poodle","dog","pet","fancy"],ru:["пудель","собака","домашний питомец","элегантный"]},"🐺":{en:["wolf","wild","howl"],ru:["волк","дикий","воет"]},"🦊":{en:["fox","cunning","wild"],ru:["лиса","хитрая","дикая"]},"🦝":{en:["raccoon","mischievous","wild"],ru:["енот","озорной","дикий"]},"🐱":{en:["cat","pet","feline"],ru:["кот","домашний питомец","кошачий"]},"🐈":{en:["cat","feline","pet"],ru:["кот","кошачий","домашний питомец"]},"🐈‍⬛":{en:["black cat","mysterious","feline"],ru:["чёрный кот","загадочный","кошачий"]},"🦁":{en:["lion","king","wild","courage"],ru:["лев","король","дикий","отвага"]},"🐯":{en:["tiger","wild","stripes","fierce"],ru:["тигр","дикий","полосатый","свирепый"]},"🐅":{en:["tiger","stripes","wild"],ru:["тигр","полосатый","дикий"]},"🐆":{en:["leopard","spots","wild","fast"],ru:["леопард","пятна","дикий","быстрый"]},"🐴":{en:["horse","ride","equine"],ru:["лошадь","езда","конный"]},"🐎":{en:["horse","racing","equine"],ru:["лошадь","гонки","конный"]},"🦄":{en:["unicorn","magical","fantasy"],ru:["единорог","волшебный","фэнтези"]},"🦓":{en:["zebra","stripes","wild"],ru:["зебра","полосатая","дикая"]},"🦌":{en:["deer","antlers","forest"],ru:["олень","рога","лес"]},"🦬":{en:["bison","buffalo","wild"],ru:["бизон","буйвол","дикий"]},"🐮":{en:["cow","farm","bovine"],ru:["корова","ферма","коровий"]},"🐂":{en:["ox","bull","bovine"],ru:["вол","бык","коровий"]},"🐃":{en:["water buffalo","bovine","farm"],ru:["водный буйвол","коровий","ферма"]},"🐄":{en:["cow","bovine","farm"],ru:["корова","коровий","ферма"]},"🐷":{en:["pig","farm","oink"],ru:["свинья","ферма","хрюк"]},"🐖":{en:["pig","swine","farm"],ru:["свинья","свинное животное","ферма"]},"🐗":{en:["boar","wild","pig"],ru:["кабан","дикий","свинья"]},"🐽":{en:["pig nose","snout"],ru:["свинной нос","хоботок"]},"🐏":{en:["ram","sheep","male"],ru:["баран","овца","самец"]},"🐑":{en:["sheep","wool","farm"],ru:["овца","шерсть","ферма"]},"🐐":{en:["goat","farm","bleat"],ru:["коза","ферма","блеет"]},"🐪":{en:["camel","desert","hump"],ru:["верблюд","пустыня","горб"]},"🐫":{en:["camel","two-hump","desert"],ru:["двугорбый верблюд","двугорбый","пустыня"]},"🦙":{en:["llama","alpaca","cute"],ru:["лама","альпака","милый"]},"🦒":{en:["giraffe","tall","spots"],ru:["жираф","высокий","пятна"]},"🐘":{en:["elephant","trunk","large"],ru:["слон","хобот","большой"]},"🦏":{en:["rhinoceros","horn","tough"],ru:["носорог","рог","жесткий"]},"🦛":{en:["hippopotamus","water","large"],ru:["бегемот","вода","большой"]},"🦃":{en:["turkey","bird","thanksgiving"],ru:["индейка","птица","День благодарения"]},"🐔":{en:["chicken","rooster","hen"],ru:["курица","петух","курица (самка)"]},"🐓":{en:["rooster","chicken","bird"],ru:["петух","курица","птица"]},"🐣":{en:["hatching chick","baby","bird"],ru:["вылупляющийся цыплёнок","малыш","птица"]},"🐤":{en:["chick","small","bird"],ru:["цыплёнок","маленький","птица"]},"🐥":{en:["baby chicken","cute","bird"],ru:["цыплёнок","милый","птица"]},"🐦":{en:["bird","tweet","wing"],ru:["птица","чирик","крыло"]},"🐧":{en:["penguin","cold","bird"],ru:["пингвин","холодный","птица"]},"🕊️":{en:["dove","peace","bird"],ru:["голубь","мир","птица"]},"🦅":{en:["eagle","wild","bird"],ru:["орёл","дикий","птица"]},"🦆":{en:["duck","water","bird"],ru:["утка","вода","птица"]},"🦢":{en:["swan","graceful","bird"],ru:["лебедь","грациозный","птица"]},"🦉":{en:["owl","wise","night","bird"],ru:["сова","мудрая","ночная","птица"]},"🦤":{en:["dodo","extinct","bird"],ru:["додо","вымершая","птица"]},"🪶":{en:["feather","light","bird"],ru:["перо","лёгкое","птица"]},"🦩":{en:["flamingo","pink","bird"],ru:["фламинго","розовый","птица"]},"🦚":{en:["peacock","colorful","bird"],ru:["павлин","яркий","птица"]},"🦜":{en:["parrot","talkative","colorful"],ru:["попугай","болтливый","яркий"]},"🐸":{en:["frog","amphibian","green"],ru:["лягушка","амфибия","зелёная"]},"🐊":{en:["crocodile","reptile","danger"],ru:["крокодил","рептилия","опасность"]},"🐢":{en:["turtle","slow","reptile"],ru:["черепаха","медленная","рептилия"]},"🦎":{en:["lizard","reptile","scaly"],ru:["ящерица","рептилия","чешуйчатая"]},"🐍":{en:["snake","reptile","slither"],ru:["змея","рептилия","ползать"]},"🐲":{en:["dragon face","mythical","dragon"],ru:["лицо дракона","мифический","дракон"]},"🐉":{en:["dragon","mythical","fire"],ru:["дракон","мифический","огонь"]},"🦕":{en:["dinosaur","sauropod","prehistoric"],ru:["динозавр","зауропод","доисторический"]},"🦖":{en:["dinosaur","T-Rex","prehistoric"],ru:["динозавр","Ти-Рекс","доисторический"]},"🐳":{en:["whale","ocean","large"],ru:["кит","океан","большой"]},"🐋":{en:["whale","ocean","big"],ru:["кит","океан","огромный"]},"🐬":{en:["dolphin","ocean","friendly"],ru:["дельфин","океан","дружелюбный"]},"🦭":{en:["seal","marine","cute"],ru:["тюлень","морской","милый"]},"🐟":{en:["fish","ocean","swim"],ru:["рыба","океан","плавать"]},"🐠":{en:["tropical fish","ocean","colorful"],ru:["тропическая рыба","океан","яркая"]},"🐡":{en:["blowfish","puffer","ocean"],ru:["рыба-иглобрюх","фугу","океан"]},"🦈":{en:["shark","ocean","dangerous"],ru:["акула","океан","опасная"]},"🐙":{en:["octopus","marine","tentacles"],ru:["осьминог","морской","щупальца"]},"🐚":{en:["shell","beach","ocean"],ru:["ракушка","пляж","океан"]},"🪸":{en:["coral","reef","ocean"],ru:["коралл","риф","океан"]},"🐌":{en:["snail","slow","mollusk"],ru:["улитка","медленная","моллюск"]},"🦋":{en:["butterfly","insect","colorful"],ru:["бабочка","насекомое","яркая"]},"🐛":{en:["caterpillar","insect","larva"],ru:["гусеница","насекомое","личинка"]},"🐜":{en:["ant","small","insect"],ru:["муравей","маленький","насекомое"]},"🐝":{en:["bee","insect","honey"],ru:["пчела","насекомое","мёд"]},"🪲":{en:["beetle","insect","bug"],ru:["жук","насекомое","баг"]},"🐞":{en:["ladybug","insect","lucky"],ru:["божья коровка","насекомое","счастливая"]},"🦗":{en:["cricket","insect","chirp"],ru:["сверчок","насекомое","щебет"]},"🪳":{en:["cockroach","insect","pest"],ru:["таракан","насекомое","вредитель"]},"🕷️":{en:["spider","arachnid","insect"],ru:["паук","паукообразное","насекомое"]},"🕸️":{en:["web","spider","trap"],ru:["паутина","паук","ловушка"]},"🦂":{en:["scorpion","insect","venom"],ru:["скорпион","насекомое","яд"]},"🦟":{en:["mosquito","insect","bite"],ru:["комар","насекомое","укус"]},"🪰":{en:["fly","insect","buzz"],ru:["муха","насекомое","жужжание"]},"🪱":{en:["worm","earth","invertebrate"],ru:["червь","земля","беспозвоночное"]},"🌸":{en:["cherry blossom","flower","spring"],ru:["сакура","цветок","весна"]},"💮":{en:["white flower","flower","symbol"],ru:["белый цветок","цветок","символ"]},"🏵️":{en:["rosette","flower","decorative"],ru:["розетка","цветок","декоративный"]},"🌹":{en:["rose","flower","love","romance"],ru:["роза","цветок","любовь","романтика"]},"🥀":{en:["wilted flower","sad","decay"],ru:["увядший цветок","грусть","разложение"]},"🌺":{en:["hibiscus","flower","tropical"],ru:["гибискус","цветок","тропический"]},"🌻":{en:["sunflower","flower","summer"],ru:["подсолнух","цветок","лето"]},"🌼":{en:["blossom","flower","spring"],ru:["цветение","цветок","весна"]},"🌷":{en:["tulip","flower","spring"],ru:["тюльпан","цветок","весна"]},"🌱":{en:["seedling","plant","growth"],ru:["сеянец","растение","рост"]},"🪴":{en:["potted plant","indoor","green"],ru:["растение в горшке","в помещении","зелёное"]},"🌲":{en:["evergreen","tree","forest"],ru:["вечнозелёное","дерево","лес"]},"🌳":{en:["tree","nature","shade"],ru:["дерево","природа","тень"]},"🌴":{en:["palm tree","tropical","beach"],ru:["пальма","тропический","пляж"]},"🌵":{en:["cactus","desert","succulent"],ru:["кактус","пустыня","суккулент"]},"🌾":{en:["sheaf","grain","farm"],ru:["сноп","зерно","ферма"]},"🌿":{en:["herb","plant","leaf"],ru:["трава","растение","лист"]},"☘️":{en:["shamrock","luck","clover"],ru:["клевер","удача","трилистник"]},"🍀":{en:["four-leaf clover","luck","green"],ru:["клевер с четырьмя листьями","удача","зелёный"]},"🍁":{en:["maple leaf","autumn","fall"],ru:["кленовый лист","осень","осенний"]},"🍂":{en:["fallen leaf","autumn","nature"],ru:["опавший лист","осень","природа"]},"🍃":{en:["leaf","wind","nature"],ru:["лист","ветер","природа"]},"🍎":{en:["apple","red","fruit","healthy"],ru:["яблоко","красное","фрукт","полезное"]},"🍐":{en:["pear","fruit","green","juicy"],ru:["груша","фрукт","зелёная","сочная"]},"🍊":{en:["orange","fruit","citrus","vitamin C"],ru:["апельсин","фрукт","цитрус","витамин C"]},"🍋":{en:["lemon","citrus","sour","yellow"],ru:["лимон","цитрус","кислый","жёлтый"]},"🍌":{en:["banana","fruit","yellow","tropical"],ru:["банан","фрукт","жёлтый","тропический"]},"🍉":{en:["watermelon","fruit","summer","refreshing"],ru:["арбуз","фрукт","лето","освежающий"]},"🍇":{en:["grapes","fruit","purple","vine"],ru:["виноград","фрукт","фиолетовый","виноградная лоза"]},"🍓":{en:["strawberry","fruit","red","sweet"],ru:["клубника","фрукт","красная","сладкая"]},"🫐":{en:["blueberry","fruit","blue","healthy"],ru:["черника","фрукт","синяя","полезная"]},"🍈":{en:["melon","fruit","sweet","green"],ru:["дыня","фрукт","сладкая","зелёная"]},"🍒":{en:["cherry","fruit","red","sweet"],ru:["вишня","фрукт","красная","сладкая"]},"🍑":{en:["peach","fruit","fuzzy","sweet"],ru:["персик","фрукт","шероховатый","сладкий"]},"🥭":{en:["mango","fruit","tropical","yellow"],ru:["манго","фрукт","тропический","жёлтый"]},"🍍":{en:["pineapple","fruit","tropical","spiky"],ru:["ананас","фрукт","тропический","колючий"]},"🥥":{en:["coconut","tropical","fruit","white"],ru:["кокос","тропический","фрукт","белый"]},"🥝":{en:["kiwi","fruit","green","tart"],ru:["киви","фрукт","зелёный","кисловатый"]},"🍅":{en:["tomato","vegetable","red","juicy"],ru:["помидор","овощ","красный","сочный"]},"🍆":{en:["eggplant","vegetable","purple","aubergine"],ru:["баклажан","овощ","фиолетовый","баклажан"]},"🥑":{en:["avocado","vegetable","green","healthy"],ru:["авокадо","овощ","зелёный","полезный"]},"🥦":{en:["broccoli","vegetable","green","healthy"],ru:["брокколи","овощ","зелёный","полезный"]},"🥬":{en:["leafy greens","vegetable","lettuce","healthy"],ru:["листья салата","овощ","салат","полезный"]},"🥒":{en:["cucumber","vegetable","green","fresh"],ru:["огурец","овощ","зелёный","свежий"]},"🌶️":{en:["chili pepper","spicy","red","hot"],ru:["чили","острый","красный","горячий"]},"🫑":{en:["bell pepper","vegetable","colorful","sweet"],ru:["болгарский перец","овощ","разноцветный","сладкий"]},"🥕":{en:["carrot","vegetable","orange","crunchy"],ru:["морковь","овощ","оранжевая","хрустящая"]},"🧄":{en:["garlic","vegetable","aromatic","flavorful"],ru:["чеснок","овощ","ароматный","вкусный"]},"🧅":{en:["onion","vegetable","strong","flavor"],ru:["лук","овощ","сильный","вкус"]},"🥔":{en:["potato","vegetable","starchy","brown"],ru:["картофель","овощ","крахмалистый","коричневый"]},"🍠":{en:["sweet potato","vegetable","orange","starchy"],ru:["батат","овощ","оранжевый","крахмалистый"]},"🥐":{en:["croissant","bread","pastry","flaky"],ru:["круассан","хлеб","выпечка","слоёный"]},"🥯":{en:["bagel","bread","round","chewy"],ru:["бейгл","хлеб","круглый","жевательный"]},"🍞":{en:["bread","baked","loaf","toast"],ru:["хлеб","выпеченный","буханка","тост"]},"🥖":{en:["baguette","bread","French","long"],ru:["багет","хлеб","французский","длинный"]},"🥨":{en:["pretzel","snack","salted","twisted"],ru:["претцель","закуска","солёный","скрученный"]},"🧀":{en:["cheese","dairy","yellow","savory"],ru:["сыр","молочный продукт","жёлтый","пикантный"]},"🥚":{en:["egg","protein","breakfast"],ru:["яйцо","белок","завтрак"]},"🍳":{en:["fried egg","breakfast","cooked"],ru:["жареное яйцо","завтрак","приготовленное"]},"🥓":{en:["bacon","meat","crispy","breakfast"],ru:["бекон","мясо","хрустящий","завтрак"]},"🥩":{en:["steak","meat","protein","beef"],ru:["стейк","мясо","белок","говядина"]},"🍗":{en:["chicken leg","meat","drumstick","grilled"],ru:["куриная ножка","мясо","барабанная палочка","гриль"]},"🍖":{en:["meat on bone","barbecue","protein"],ru:["мясо на кости","барбекю","белок"]},"🦴":{en:["bone","meat","dog","skeleton"],ru:["кость","мясо","собака","скелет"]},"🌭":{en:["hot dog","fast food","sausage"],ru:["хот-дог","фастфуд","колбаска"]},"🍔":{en:["burger","fast food","beef","cheese"],ru:["бургер","фастфуд","говядина","сыр"]},"🍟":{en:["french fries","fast food","crispy","potato"],ru:["картофель фри","фастфуд","хрустящий","картофель"]},"🍕":{en:["pizza","cheese","fast food","Italian"],ru:["пицца","сыр","фастфуд","итальянская"]},"🫓":{en:["flatbread","bread","soft"],ru:["лепёшка","хлеб","мягкая"]},"🥪":{en:["sandwich","bread","meal"],ru:["бутерброд","хлеб","приём пищи"]},"🥙":{en:["pita","bread","stuffed","Greek"],ru:["пита","хлеб","фаршированная","греческая"]},"🧆":{en:["falafel","vegetarian","fried"],ru:["фалафель","вегетарианский","жареный"]},"🌮":{en:["taco","Mexican","spicy"],ru:["тако","мексиканская","острая"]},"🌯":{en:["burrito","Mexican","stuffed"],ru:["буррито","мексиканская","фаршированная"]},"🫔":{en:["tamale","Mexican","corn"],ru:["тамале","мексиканская","кукурузная"]},"🥗":{en:["salad","healthy","vegetable"],ru:["салат","здоровый","овощной"]},"🥘":{en:["paella","stew","seafood"],ru:["паэлья","тушёное блюдо","морепродукты"]},"🫕":{en:["fondue","melted","cheese"],ru:["фондю","расплавленный","сыр"]},"🥫":{en:["canned food","storage","preserved"],ru:["консервы","хранение","сохранённое"]},"🍝":{en:["spaghetti","pasta","Italian"],ru:["спагетти","паста","итальянская"]},"🍜":{en:["ramen","noodles","Asian"],ru:["рамен","лапша","азиатская"]},"🍲":{en:["hotpot","stew","broth"],ru:["хотпот","тушёное блюдо","бульон"]},"🍛":{en:["curry","spicy","rice"],ru:["карри","острая","рис"]},"🍣":{en:["sushi","Japanese","fish"],ru:["суши","японская","рыба"]},"🍱":{en:["bento box","Japanese","meal"],ru:["бенто","японская","еда"]},"🥟":{en:["dumpling","Asian","stuffed"],ru:["пельмени","азиатские","фаршированные"]},"🦪":{en:["oyster","seafood","shellfish"],ru:["устрица","морепродукт","раковина"]},"🍤":{en:["shrimp tempura","fried","seafood"],ru:["креветка темпура","жареная","морепродукт"]},"🍙":{en:["rice ball","Japanese","onigiri"],ru:["рисовый шар","японская","онигири"]},"🍚":{en:["cooked rice","staple","Asian"],ru:["варёный рис","основа","азиатская"]},"🍘":{en:["rice cracker","snack","Japanese"],ru:["рисовый крекер","закуска","японская"]},"🍥":{en:["fish cake","Japanese","swirl"],ru:["рыбный пирожок","японская","спираль"]},"🥠":{en:["fortune cookie","Chinese","paper"],ru:["печенье с предсказанием","китайское","бумажное"]},"🥮":{en:["mooncake","Chinese","festival"],ru:["лунное печенье","китайское","фестиваль"]},"🍢":{en:["skewered snack","street food"],ru:["шампур","уличная еда"]},"🍡":{en:["dango","Japanese","mochi"],ru:["данго","японское","мочи"]},"🍧":{en:["shaved ice","dessert","cold"],ru:["измельчённый лёд","десерт","холодный"]},"🍨":{en:["ice cream","cold","sweet"],ru:["мороженое","холодное","сладкое"]},"🍦":{en:["soft serve","dessert","cold"],ru:["мягкое мороженое","десерт","холодное"]},"🥧":{en:["pie","dessert","baked"],ru:["пирог","десерт","выпеченный"]},"🧁":{en:["cupcake","sweet","frosting"],ru:["капкейк","сладкий","с глазурью"]},"🍰":{en:["cake","dessert","slice"],ru:["торт","десерт","кусок"]},"🎂":{en:["birthday cake","celebration","sweet"],ru:["торт ко дню рождения","празднование","сладкий"]},"🍮":{en:["flan","custard","dessert"],ru:["флан","кастард","десерт"]},"🍭":{en:["lollipop","candy","sweet"],ru:["леденец","конфета","сладкий"]},"🍬":{en:["candy","sweet","sugar"],ru:["конфета","сладость","сахар"]},"🍫":{en:["chocolate","sweet","cocoa"],ru:["шоколад","сладкий","какао"]},"🍿":{en:["popcorn","snack","buttery"],ru:["попкорн","закуска","масляный"]},"🍩":{en:["doughnut","sweet","fried"],ru:["пончик","сладкий","жареный"]},"🍪":{en:["cookie","sweet","baked"],ru:["печенье","сладкое","выпеченное"]},"🫖":{en:["teapot","tea","hot"],ru:["чайник","чай","горячий"]},"☕":{en:["coffee","hot drink","caffeine"],ru:["кофе","горячий напиток","кофеин"]},"🍵":{en:["green tea","hot","Japanese"],ru:["зелёный чай","горячий","японский"]},"🧃":{en:["juice","drink","fruit"],ru:["сок","напиток","фруктовый"]},"🥤":{en:["soft drink","straw","fast food"],ru:["безалкогольный напиток","с трубочкой","фастфуд"]},"🧋":{en:["bubble tea","milk tea","boba"],ru:["бабл-ти","молочный чай","боба"]},"🍶":{en:["sake","Japanese","rice wine"],ru:["саке","японский","рисовое вино"]},"🍺":{en:["beer","drink","alcohol"],ru:["пиво","напиток","алкоголь"]},"🍻":{en:["cheers","beer","drinking"],ru:["ура","пиво","выпивка"]},"🥂":{en:["champagne","celebration","toast"],ru:["шампанское","празднование","тост"]},"🍷":{en:["wine","drink","red"],ru:["вино","напиток","красное"]},"🥃":{en:["whiskey","liquor","alcohol"],ru:["виски","ликёр","алкоголь"]},"🍸":{en:["cocktail","martini","drink"],ru:["коктейль","мартини","напиток"]},"🍹":{en:["tropical drink","cocktail","summer"],ru:["тропический напиток","коктейль","лето"]},"🧉":{en:["mate","South American","tea"],ru:["мате","южноамериканский","чай"]},"🍾":{en:["champagne bottle","celebration","party"],ru:["бутылка шампанского","празднование","вечеринка"]},"⚽":{en:["soccer","football","sports","ball"],ru:["футбол","футбол","спорт","мяч"]},"🏀":{en:["basketball","sports","hoop","dunk"],ru:["баскетбол","спорт","кольцо","данк"]},"🏈":{en:["American football","sports","rugby"],ru:["американский футбол","спорт","регби"]},"⚾":{en:["baseball","sports","bat"],ru:["бейсбол","спорт","бита"]},"🥎":{en:["softball","sports","ball"],ru:["софтбол","спорт","мяч"]},"🎾":{en:["tennis","sports","racket"],ru:["теннис","спорт","ракетка"]},"🏐":{en:["volleyball","sports","beach"],ru:["волейбол","спорт","пляж"]},"🏉":{en:["rugby","sports","oval ball"],ru:["регби","спорт","овальный мяч"]},"🥏":{en:["frisbee","throw","flying disc"],ru:["фрисби","бросок","летающий диск"]},"🎱":{en:["billiards","8 ball","pool"],ru:["бильярд","восьмёрка","пул"]},"🪀":{en:["yo-yo","toy","string"],ru:["йо-йо","игрушка","верёвка"]},"🏓":{en:["ping pong","table tennis","sports"],ru:["пинг-понг","настольный теннис","спорт"]},"🏸":{en:["badminton","racket","sports"],ru:["бадминтон","ракетка","спорт"]},"🏒":{en:["hockey","ice hockey","sports"],ru:["хоккей","хоккей на льду","спорт"]},"🏑":{en:["field hockey","sports","stick"],ru:["хоккей на траве","спорт","клюшка"]},"🥍":{en:["lacrosse","sports","net"],ru:["лакросс","спорт","сеть"]},"🏏":{en:["cricket","bat","sports"],ru:["крикет","бита","спорт"]},"⛳":{en:["golf","sports","hole in one"],ru:["гольф","спорт","луночка"]},"🪁":{en:["kite","flying","wind"],ru:["змей","летать","ветер"]},"🎣":{en:["fishing","hook","water"],ru:["рыбалка","крючок","вода"]},"🤿":{en:["diving","underwater","snorkel"],ru:["дайвинг","под водой","снорклинг"]},"🎽":{en:["running","jersey","athlete"],ru:["бег","майка","спортсмен"]},"🛹":{en:["skateboard","sports","extreme"],ru:["скейтборд","спорт","экстрим"]},"🛼":{en:["roller skate","sports","wheels"],ru:["роликовые коньки","спорт","колёса"]},"🛷":{en:["sled","winter","snow"],ru:["санки","зима","снег"]},"⛸️":{en:["ice skate","winter","sports"],ru:["коньки","зима","спорт"]},"🥌":{en:["curling","winter","stone"],ru:["керлинг","зима","камень"]},"⛷️":{en:["skiing","winter","snow"],ru:["лыжи","зима","снег"]},"🏂":{en:["snowboarding","sports","snow"],ru:["сноуборд","спорт","снег"]},"🪂":{en:["parachute","skydiving","air"],ru:["парашют","скайдайвинг","воздух"]},"🏋️":{en:["weightlifting","gym","strong"],ru:["тяжёлая атлетика","спортзал","сильный"]},"🤼":{en:["wrestling","fight","grapple"],ru:["борьба","драка","схватка"]},"🤸":{en:["gymnastics","acrobatics","flip"],ru:["гимнастика","акробатика","сальто"]},"⛹️":{en:["basketball","dribbling","sports"],ru:["баскетбол","дриблинг","спорт"]},"🤾":{en:["handball","sports","throw"],ru:["гандбол","спорт","бросок"]},"🏌️":{en:["golf","swing","sports"],ru:["гольф","мах","спорт"]},"🏇":{en:["horse racing","sports","jockey"],ru:["конные скачки","спорт","жокей"]},"🧘":{en:["meditation","yoga","zen"],ru:["медитация","йога","дзен"]},"🏄":{en:["surfing","wave","water"],ru:["серфинг","волна","вода"]},"🏊":{en:["swimming","water","pool"],ru:["плавание","вода","бассейн"]},"🤽":{en:["water polo","sports","swimming"],ru:["водное поло","спорт","плавание"]},"🚣":{en:["rowing","boat","water"],ru:["гребля","лодка","вода"]},"🧗":{en:["rock climbing","sports","mountain"],ru:["скалолазание","спорт","гора"]},"🚴":{en:["cycling","bike","sports"],ru:["велоспорт","велосипед","спорт"]},"🚵":{en:["mountain biking","sports","outdoor"],ru:["маунтинбайк","спорт","на свежем воздухе"]},"🎪":{en:["circus","tent","performance"],ru:["цирк","палатка","выступление"]},"🎭":{en:["theater","drama","acting"],ru:["театр","драма","актерство"]},"🎨":{en:["painting","art","colors"],ru:["живопись","искусство","цвета"]},"🎬":{en:["film","clapperboard","movie"],ru:["фильм","хлопушка","кино"]},"🎤":{en:["microphone","singing","music"],ru:["микрофон","пение","музыка"]},"🎧":{en:["headphones","music","listening"],ru:["наушники","музыка","прослушивание"]},"🎼":{en:["music","sheet","notes"],ru:["музыка","ноты","сценарий"]},"🎹":{en:["piano","keyboard","music"],ru:["пианино","клавиатура","музыка"]},"🥁":{en:["drums","music","percussion"],ru:["барабаны","музыка","ударные"]},"🎷":{en:["saxophone","jazz","music"],ru:["саксофон","джаз","музыка"]},"🎺":{en:["trumpet","brass","music"],ru:["труба","латунь","музыка"]},"🎸":{en:["guitar","music","rock"],ru:["гитара","музыка","рок"]},"🎻":{en:["violin","music","strings"],ru:["скрипка","музыка","струны"]},"🎲":{en:["dice","game","board game"],ru:["кубики","игра","настольная игра"]},"🎯":{en:["dart","target","game"],ru:["дротик","цель","игра"]},"🎳":{en:["bowling","sports","pins"],ru:["боулинг","спорт","кегли"]},"🎮":{en:["video game","console","gaming"],ru:["видеоигра","консоль","игры"]},"🎰":{en:["slot machine","casino","gambling"],ru:["игровой автомат","казино","азартные игры"]},"🧩":{en:["puzzle","pieces","brain teaser"],ru:["головоломка","кусочки","разминка для мозга"]},"🎫":{en:["ticket","event","entry"],ru:["билет","событие","вход"]},"🎟️":{en:["admission","ticket","event"],ru:["входной билет","билет","событие"]},"🚗":{en:["car","automobile","vehicle","transport"],ru:["автомобиль","машина","транспортное средство","транспорт"]},"🚕":{en:["taxi","cab","transport","vehicle"],ru:["такси","маршрутка","транспорт","транспортное средство"]},"🚙":{en:["suv","vehicle","transport"],ru:["внедорожник","транспортное средство","транспорт"]},"🚌":{en:["bus","public transport","commute"],ru:["автобус","общественный транспорт","коммьют"]},"🚎":{en:["trolleybus","public transport","electric"],ru:["троллейбус","общественный транспорт","электрический"]},"🏎️":{en:["race car","sports car","fast","speed"],ru:["гоночный автомобиль","спортивный автомобиль","быстрый","скорость"]},"🚓":{en:["police car","law enforcement","vehicle"],ru:["полицейская машина","правоохранительные органы","транспортное средство"]},"🚑":{en:["ambulance","emergency","hospital"],ru:["скорая помощь","чрезвычайная ситуация","больница"]},"🚒":{en:["fire truck","firefighter","emergency"],ru:["пожарная машина","пожарный","чрезвычайная ситуация"]},"🚐":{en:["van","minibus","transport"],ru:["фургон","маршрутка","транспорт"]},"🛻":{en:["pickup truck","off-road","vehicle"],ru:["пикап","для бездорожья","транспортное средство"]},"🚚":{en:["delivery truck","freight","cargo"],ru:["грузовик","доставка","груз"]},"🚛":{en:["truck","semi-trailer","transport"],ru:["грузовик","самосвал","транспорт"]},"🚜":{en:["tractor","farming","agriculture"],ru:["трактор","сельское хозяйство","агрономия"]},"🛵":{en:["scooter","motorbike","moped"],ru:["скутер","мотоцикл","мопед"]},"🏍️":{en:["motorcycle","bike","racing"],ru:["мотоцикл","байк","гоночный"]},"🛺":{en:["rickshaw","auto rickshaw","transport"],ru:["рикша","авто-рикша","транспорт"]},"🚲":{en:["bicycle","bike","pedal","cycling"],ru:["велосипед","байк","педаль","велоспорт"]},"🛴":{en:["kick scooter","scooter","ride"],ru:["самокат","скутер","поездка"]},"✈️":{en:["airplane","flight","travel","sky"],ru:["самолёт","рейс","путешествие","небо"]},"🛩️":{en:["small airplane","aviation","sky"],ru:["малый самолёт","авиация","небо"]},"🛫":{en:["departure","takeoff","airport"],ru:["вылет","взлёт","аэропорт"]},"🛬":{en:["landing","arrival","airport"],ru:["посадка","прибытие","аэропорт"]},"🚁":{en:["helicopter","aviation","air"],ru:["вертолёт","авиация","воздух"]},"🚀":{en:["rocket","space","launch","NASA"],ru:["ракета","космос","запуск","НАСА"]},"🛸":{en:["UFO","alien","spaceship","extraterrestrial"],ru:["НЛО","инопланетянин","космический корабль","внеземной"]},"🛶":{en:["canoe","boat","paddle","water"],ru:["каноэ","лодка","весло","вода"]},"⛵":{en:["sailboat","yacht","sea"],ru:["парусник","яхта","море"]},"🚤":{en:["motorboat","speedboat","ocean"],ru:["моторная лодка","скоростной катер","океан"]},"🛥️":{en:["yacht","luxury","boat"],ru:["яхта","роскошь","лодка"]},"🛳️":{en:["cruise ship","ocean","voyage"],ru:["круизный лайнер","океан","путешествие"]},"⛴️":{en:["ferry","boat","transport"],ru:["паром","лодка","транспорт"]},"🚢":{en:["ship","ocean","voyage"],ru:["корабль","океан","путешествие"]},"🏰":{en:["castle","fortress","history"],ru:["замок","крепость","история"]},"🏯":{en:["Japanese castle","Asia","samurai"],ru:["японский замок","Азия","самурай"]},"🏟️":{en:["stadium","sports","arena"],ru:["стадион","спорт","арена"]},"🏖️":{en:["beach","sun","vacation"],ru:["пляж","солнце","отпуск"]},"🏝️":{en:["island","tropical","vacation"],ru:["остров","тропический","отпуск"]},"🏜️":{en:["desert","sand","dry"],ru:["пустыня","песок","сухой"]},"🌋":{en:["volcano","eruption","lava"],ru:["вулкан","извержение","лава"]},"⛰️":{en:["mountain","hiking","nature"],ru:["гора","поход","природа"]},"🏔️":{en:["snowy mountain","climbing","cold"],ru:["снежная гора","скалолазание","холод"]},"🗻":{en:["Mount Fuji","Japan","scenic"],ru:["гора Фудзи","Япония","живописный"]},"🏕️":{en:["camping","tent","outdoors"],ru:["кемпинг","палатка","на природе"]},"🏭":{en:["factory","industry","building"],ru:["фабрика","индустрия","здание"]},"🏢":{en:["office building","corporate","city"],ru:["офисное здание","корпоративный","город"]},"🏬":{en:["shopping mall","retail","stores"],ru:["торговый центр","розничная торговля","магазины"]},"🏣":{en:["post office","mail","building"],ru:["почтовое отделение","почта","здание"]},"🏤":{en:["post office","mail","postal service"],ru:["почтовое отделение","почта","почтовая служба"]},"🏥":{en:["hospital","healthcare","emergency"],ru:["больница","здравоохранение","чрезвычайная ситуация"]},"🏦":{en:["bank","money","finance"],ru:["банк","деньги","финансы"]},"🏨":{en:["hotel","accommodation","stay"],ru:["отель","размещение","проживание"]},"🏪":{en:["convenience store","shopping","24/7"],ru:["магазин","шоппинг","круглосуточно"]},"🏫":{en:["school","education","learning"],ru:["школа","образование","обучение"]},"🏩":{en:["love hotel","romantic","Japan"],ru:["любовный отель","романтический","Япония"]},"💒":{en:["wedding","church","marriage"],ru:["свадьба","церковь","брак"]},"⛪":{en:["church","Christianity","religion"],ru:["церковь","христианство","религия"]},"🕌":{en:["mosque","Islam","prayer"],ru:["мечеть","ислам","молитва"]},"🕍":{en:["synagogue","Judaism","religion"],ru:["синагога","иудаизм","религия"]},"🛕":{en:["hindu temple","spiritual","India"],ru:["индуистский храм","духовный","Индия"]},"⛩️":{en:["shrine","torii","Japan"],ru:["святилище","тории","Япония"]},"🏛️":{en:["government building","politics","history"],ru:["правительственное здание","политика","история"]},"⌚":{en:["watch","smartwatch","time"],ru:["часы","умные часы","время"]},"📱":{en:["smartphone","mobile","phone"],ru:["смартфон","мобильный","телефон"]},"💻":{en:["laptop","computer","technology"],ru:["ноутбук","компьютер","технология"]},"⌨️":{en:["keyboard","typing","computer"],ru:["клавиатура","набор текста","компьютер"]},"🖥️":{en:["desktop","monitor","screen"],ru:["настольный компьютер","монитор","экран"]},"🖨️":{en:["printer","print","office"],ru:["принтер","печать","офис"]},"🖱️":{en:["mouse","computer","click"],ru:["мышь","компьютер","клик"]},"🖲️":{en:["trackball","navigation","input"],ru:["трекбол","навигация","ввод"]},"🕹️":{en:["joystick","gaming","console"],ru:["джойстик","игры","консоль"]},"🗜️":{en:["clamp","tool","hardware"],ru:["зажим","инструмент","аппаратное обеспечение"]},"💽":{en:["mini disc","storage","media"],ru:["мини-диск","хранение","медиа"]},"💾":{en:["floppy disk","save","data"],ru:["флоппи-диск","сохранить","данные"]},"💿":{en:["CD","compact disc","music"],ru:["CD","компакт-диск","музыка"]},"📀":{en:["DVD","video","disc"],ru:["DVD","видео","диск"]},"📼":{en:["VHS","video cassette","retro"],ru:["VHS","видеокассета","ретро"]},"📷":{en:["camera","photo","photography"],ru:["камера","фото","фотография"]},"📸":{en:["camera flash","photography","snapshot"],ru:["вспышка камеры","фотография","снимок"]},"📹":{en:["video camera","recording","film"],ru:["видеокамера","запись","фильм"]},"🎥":{en:["movie camera","film","cinema"],ru:["кино-камера","фильм","кино"]},"📞":{en:["telephone","call","communication"],ru:["телефон","звонок","коммуникация"]},"☎️":{en:["phone","landline","call"],ru:["телефон","стационарный","звонок"]},"📟":{en:["pager","message","communication"],ru:["пейджер","сообщение","коммуникация"]},"📠":{en:["fax machine","office","document"],ru:["факс","офис","документ"]},"📺":{en:["TV","television","screen"],ru:["телевизор","теле","экран"]},"📻":{en:["radio","broadcast","audio"],ru:["радио","трансляция","аудио"]},"🎙️":{en:["microphone","recording","podcast"],ru:["микрофон","запись","подкаст"]},"🎚️":{en:["control knob","audio","volume"],ru:["ручка управления","аудио","громкость"]},"🎛️":{en:["sliders","equalizer","settings"],ru:["ползунки","эквалайзер","настройки"]},"📡":{en:["satellite dish","broadcast","signal"],ru:["спутниковая антенна","трансляция","сигнал"]},"🔋":{en:["battery","power","energy"],ru:["батарея","мощность","энергия"]},"🔌":{en:["plug","electricity","charging"],ru:["штекер","электричество","зарядка"]},"💡":{en:["light bulb","idea","illumination"],ru:["лампочка","идея","освещение"]},"🔦":{en:["flashlight","torch","light"],ru:["фонарик","фонарь","свет"]},"🕯️":{en:["candle","light","fire"],ru:["свеча","свет","огонь"]},"🧯":{en:["fire extinguisher","safety","fire"],ru:["огнетушитель","безопасность","огонь"]},"🛢️":{en:["barrel","oil","fuel"],ru:["бочка","масло","топливо"]},"💸":{en:["money with wings","cash","spending"],ru:["деньги с крыльями","наличные","расходы"]},"💵":{en:["dollar bills","money","USD"],ru:["долларовые банкноты","деньги","USD"]},"💴":{en:["yen","money","Japan"],ru:["иена","деньги","Япония"]},"💶":{en:["euro","money","currency"],ru:["евро","деньги","валюта"]},"💷":{en:["pound","money","UK"],ru:["фунт","деньги","Великобритания"]},"🪙":{en:["coin","currency","money"],ru:["монета","валюта","деньги"]},"💰":{en:["money bag","wealth","rich"],ru:["мешок с деньгами","богатство","богатый"]},"💳":{en:["credit card","banking","payment"],ru:["кредитная карта","банковское дело","оплата"]},"💎":{en:["gem","diamond","valuable"],ru:["драгоценный камень","бриллиант","ценный"]},"⚖️":{en:["balance scale","justice","law"],ru:["весы","справедливость","закон"]},"🪜":{en:["ladder","climb","height"],ru:["лестница","лазить","высота"]},"🧰":{en:["toolbox","tools","repair"],ru:["ящик с инструментами","инструменты","ремонт"]},"🔧":{en:["wrench","repair","tools"],ru:["гаечный ключ","ремонт","инструменты"]},"🔨":{en:["hammer","build","fix"],ru:["молоток","строить","чинить"]},"⚒️":{en:["hammer and pick","construction","work"],ru:["молот и кирка","строительство","работа"]},"🛠️":{en:["tools","fix","maintenance"],ru:["инструменты","чинить","обслуживание"]},"⛏️":{en:["pickaxe","mining","digging"],ru:["кирка","горное дело","копать"]},"✏️":{en:["pencil","writing","notes"],ru:["карандаш","написание","заметки"]},"🖊️":{en:["pen","writing","signature"],ru:["ручка","написание","подпись"]},"🖋️":{en:["fountain pen","calligraphy","writing"],ru:["перьевая ручка","каллиграфия","написание"]},"✒️":{en:["nib","ink","writing"],ru:["остриё","чернила","написание"]},"🖌️":{en:["paintbrush","art","painting"],ru:["кисть","искусство","живопись"]},"🖍️":{en:["crayon","drawing","color"],ru:["мелки","рисование","цвет"]},"📝":{en:["memo","notes","document"],ru:["заметка","записи","документ"]},"📚":{en:["books","reading","library"],ru:["книги","чтение","библиотека"]},"📖":{en:["open book","reading","story"],ru:["открытая книга","чтение","история"]},"🔖":{en:["bookmark","reading","save"],ru:["закладка","чтение","сохранить"]},"📑":{en:["bookmark tabs","pages","notes"],ru:["закладки","страницы","заметки"]},"🗒️":{en:["spiral notepad","notes","journal"],ru:["спиральный блокнот","записи","журнал"]},"📄":{en:["document","paper","page"],ru:["документ","бумага","страница"]},"📰":{en:["newspaper","news","journalism"],ru:["газета","новости","журналистика"]},"🗞️":{en:["rolled newspaper","press","print"],ru:["свернутая газета","пресса","печатное издание"]},"📁":{en:["file folder","documents","storage"],ru:["папка","документы","хранение"]},"📂":{en:["open folder","organization","files"],ru:["открытая папка","организация","файлы"]},"🗂️":{en:["card index","catalog","records"],ru:["карточный индекс","каталог","записи"]},"❤️":{en:["heart","love","affection"],ru:["сердце","любовь","нежность"]},"🧡":{en:["orange heart","warmth","care"],ru:["оранжевое сердце","теплота","забота"]},"💛":{en:["yellow heart","friendship","happiness"],ru:["жёлтое сердце","дружба","счастье"]},"💚":{en:["green heart","envy","nature","eco"],ru:["зелёное сердце","зависть","природа","эко"]},"💙":{en:["blue heart","loyalty","trust"],ru:["синее сердце","верность","доверие"]},"💜":{en:["purple heart","compassion","admiration"],ru:["фиолетовое сердце","сострадание","восхищение"]},"🤎":{en:["brown heart","earth","stability"],ru:["коричневое сердце","земля","устойчивость"]},"🖤":{en:["black heart","mourning","dark"],ru:["чёрное сердце","скорбь","тёмный"]},"🤍":{en:["white heart","pure","peace"],ru:["белое сердце","чистый","мир"]},"💔":{en:["broken heart","sad","heartbreak"],ru:["разбитое сердце","грусть","сердечная боль"]},"❣️":{en:["heart exclamation","love","emotion"],ru:["сердечный восклицательный знак","любовь","эмоция"]},"💕":{en:["two hearts","romance","affection"],ru:["два сердца","романтика","нежность"]},"💞":{en:["revolving hearts","love","relationship"],ru:["вращающиеся сердца","любовь","отношения"]},"💓":{en:["beating heart","emotion","passion"],ru:["бьющееся сердце","эмоция","страсть"]},"💗":{en:["growing heart","love","expanding"],ru:["растущее сердце","любовь","расширяющееся"]},"💖":{en:["sparkling heart","admiration","shine"],ru:["блестящее сердце","восхищение","сияние"]},"💘":{en:["heart with arrow","love","romance"],ru:["сердце со стрелой","любовь","романтика"]},"💝":{en:["heart with ribbon","gift","affection"],ru:["сердце с лентой","подарок","нежность"]},"💟":{en:["heart decoration","symbol","love"],ru:["украшение сердца","символ","любовь"]},"☮️":{en:["peace","pacifism","symbol"],ru:["мир","пацифизм","символ"]},"✝️":{en:["cross","christianity","religion"],ru:["крест","христианство","религия"]},"☪️":{en:["star and crescent","islam","faith"],ru:["звезда и полумесяц","ислам","вера"]},"🕉️":{en:["om","hinduism","spiritual"],ru:["ом","индуизм","духовный"]},"☸️":{en:["dharma wheel","buddhism","karma"],ru:["колесо дхармы","буддизм","карма"]},"✡️":{en:["star of david","judaism","faith"],ru:["звезда Давида","иудаизм","вера"]},"🔯":{en:["hexagram","mystic","spiritual"],ru:["шестиконечная звезда","мистический","духовный"]},"🕎":{en:["menorah","hanukkah","jewish"],ru:["менора","Ханука","еврейский"]},"☯️":{en:["yin yang","balance","harmony"],ru:["инь-ян","баланс","гармония"]},"☦️":{en:["orthodox cross","christianity","faith"],ru:["православный крест","христианство","вера"]},"🛐":{en:["place of worship","religion","faith"],ru:["место поклонения","религия","вера"]},"⛎":{en:["ophiuchus","zodiac","astrology"],ru:["змееносец","зодиак","астрология"]},"⚠️":{en:["warning","caution","alert"],ru:["предупреждение","осторожность","тревога"]},"🚸":{en:["children crossing","school","pedestrian"],ru:["дети на переходе","школа","пешеход"]},"⛔":{en:["no entry","prohibited","restricted"],ru:["вход запрещён","запрещено","ограничено"]},"🚫":{en:["prohibited","no","forbidden"],ru:["запрещено","нет","запрещено"]},"☢️":{en:["radioactive","hazard","danger"],ru:["радиоактивный","опасность","угроза"]},"☣️":{en:["biohazard","toxic","warning"],ru:["биологическая опасность","ядовитый","предупреждение"]},"➕":{en:["plus","addition","math"],ru:["плюс","сложение","математика"]},"➖":{en:["minus","subtraction","math"],ru:["минус","вычитание","математика"]},"➗":{en:["division","divide","math"],ru:["деление","делить","математика"]},"✖️":{en:["multiplication","times","math"],ru:["умножение","раз","математика"]},"♾️":{en:["infinity","limitless","math"],ru:["бесконечность","безграничный","математика"]},"💲":{en:["dollar","money","currency"],ru:["доллар","деньги","валюта"]},"💱":{en:["currency exchange","finance","money"],ru:["обмен валюты","финансы","деньги"]},"⬆️":{en:["up arrow","increase","direction"],ru:["стрелка вверх","увеличение","направление"]},"↗️":{en:["up-right arrow","growth","move"],ru:["стрелка вверх-вправо","рост","движение"]},"➡️":{en:["right arrow","next","forward"],ru:["стрелка вправо","далее","вперёд"]},"↘️":{en:["down-right arrow","decrease","move"],ru:["стрелка вниз-вправо","уменьшение","движение"]},"⬇️":{en:["down arrow","lower","decline"],ru:["стрелка вниз","понижение","снижение"]},"↙️":{en:["down-left arrow","falling","move"],ru:["стрелка вниз-влево","падение","движение"]},"⬅️":{en:["left arrow","back","previous"],ru:["стрелка влево","назад","предыдущий"]},"↖️":{en:["up-left arrow","direction","move"],ru:["стрелка вверх-влево","направление","движение"]},"↕️":{en:["vertical arrows","up down","change"],ru:["вертикальные стрелки","вверх вниз","изменение"]},"↔️":{en:["horizontal arrows","left right","switch"],ru:["горизонтальные стрелки","влево вправо","переключение"]},"↩️":{en:["back arrow","undo","return"],ru:["стрелка назад","отмена","возврат"]},"↪️":{en:["right curved arrow","redirect","turn"],ru:["изогнутая стрелка вправо","перенаправление","поворот"]},"⤴️":{en:["up-right arrow","diagonal","move"],ru:["диагональная стрелка вверх-вправо","диагональ","движение"]},"⤵️":{en:["down-right arrow","diagonal","move"],ru:["диагональная стрелка вниз-вправо","диагональ","движение"]},"🔃":{en:["repeat","cycle","refresh"],ru:["повтор","цикл","обновление"]},"🔄":{en:["counterclockwise arrows","reload","sync"],ru:["стрелки против часовой стрелки","перезагрузка","синхронизация"]},"🔆":{en:["bright","high brightness","sun"],ru:["яркий","высокая яркость","солнце"]},"📶":{en:["signal","network","connection"],ru:["сигнал","сеть","соединение"]},"🎦":{en:["cinema","movies","entertainment"],ru:["кино","фильмы","развлечения"]},"🔅":{en:["dim","low brightness","light"],ru:["тусклый","низкая яркость","свет"]},"♻️":{en:["recycle","eco","sustainability"],ru:["переработка","эко","устойчивость"]},"✅":{en:["check mark","yes","approved"],ru:["галочка","да","одобрено"]},"❌":{en:["cross mark","no","wrong"],ru:["крестик","нет","неправильно"]},"❎":{en:["negative cross","decline","cancel"],ru:["отрицательный крест","отказ","отмена"]},"➰":{en:["curly loop","infinity","twist"],ru:["извилистая петля","бесконечность","скрутка"]},"➿":{en:["double curly loop","loop","repeat"],ru:["двойная извилистая петля","петля","повтор"]},"〽️":{en:["part alternation","music","symbol"],ru:["знак чередования","музыка","символ"]},"✳️":{en:["eight-spoked asterisk","star","highlight"],ru:["восьмиконечная астериска","звезда","акцент"]},"✴️":{en:["eight-pointed star","shine","special"],ru:["восьмиконечная звезда","сияние","особый"]},"❇️":{en:["sparkle","highlight","shine"],ru:["сверкание","акцент","сияние"]},"©️":{en:["copyright","legal","rights"],ru:["авторское право","юридический","права"]},"®️":{en:["registered","trademark","brand"],ru:["зарегистрировано","торговая марка","бренд"]},"™️":{en:["trademark","brand","symbol"],ru:["торговая марка","бренд","символ"]},"🏁":{en:["checkered flag","finish line","racing"],ru:["шашечный флаг","финишная черта","гонки"]},"🚩":{en:["triangular flag","mark","warning"],ru:["треугольный флаг","метка","предупреждение"]},"🎌":{en:["crossed flags","celebration","Japan"],ru:["перекрещённые флаги","празднование","Япония"]},"🏴":{en:["black flag","protest","symbol"],ru:["чёрный флаг","протест","символ"]},"🏳️":{en:["white flag","surrender","peace"],ru:["белый флаг","капитуляция","мир"]},"🏳️‍🌈":{en:["rainbow flag","LGBTQ+","pride"],ru:["радужный флаг","ЛГБТК+","гордость"]},"🏳️‍⚧️":{en:["transgender flag","trans","pride"],ru:["трансгендерный флаг","транс","гордость"]},"🏴‍☠️":{en:["pirate flag","skull","danger"],ru:["пиратский флаг","череп","опасность"]},"🇺🇸":{en:["United States","USA","America"],ru:["Соединённые Штаты","США","Америка"]},"🇬🇧":{en:["United Kingdom","UK","Britain"],ru:["Соединённое Королевство","Великобритания","Британия"]},"🇯🇵":{en:["Japan","Japanese","Asia"],ru:["Япония","японский","Азия"]},"🇰🇷":{en:["South Korea","Korea","Asian"],ru:["Южная Корея","Корея","азиатский"]},"🇩🇪":{en:["Germany","Deutschland","Europe"],ru:["Германия","Германия","Европа"]},"🇨🇳":{en:["China","Chinese","Asia"],ru:["Китай","китайский","Азия"]},"🇧🇷":{en:["Brazil","Brasil","South America"],ru:["Бразилия","Бразилия","Южная Америка"]},"🇮🇳":{en:["India","Indian","Asia"],ru:["Индия","индийский","Азия"]},"🇫🇷":{en:["France","French","Europe"],ru:["Франция","французский","Европа"]},"🇪🇸":{en:["Spain","Spanish","Europe"],ru:["Испания","испанский","Европа"]},"🇮🇹":{en:["Italy","Italian","Europe"],ru:["Италия","итальянский","Европа"]},"🇷🇺":{en:["Russia","Russian","Europe"],ru:["Россия","русский","Европа"]},"🇨🇦":{en:["Canada","Canadian","North America"],ru:["Канада","канадский","Северная Америка"]},"🇦🇺":{en:["Australia","Aussie","Oceania"],ru:["Австралия","австралиец","Океания"]},"🇳🇿":{en:["New Zealand","Kiwi","Oceania"],ru:["Новая Зеландия","киви","Океания"]}};class Ve{constructor(e={}){this.container=null,this.searchInput=null,this.emojiContainer=null,this.categoryNav=null,this.infoPanel=null,this.infoIcon=null,this.infoKeywords=null,this.languageSelect=null,this.options={onEmojiSelect:e.onEmojiSelect||(()=>{}),container:e.container||document.body,position:e.position||"bottom"},this.categories={recent:{icon:"🕒"},smileys:{icon:"😊"},nature:{icon:"🦊"},food:{icon:"🍔"},activities:{icon:"⚽"},travel:{icon:"✈️"},objects:{icon:"💡"},symbols:{icon:"💕"},flags:{icon:"🎌"}},this.categoryLabels={en:{recent:"Recently Used",smileys:"Smileys & People",nature:"Animals & Nature",food:"Food & Drink",activities:"Activities",travel:"Travel & Places",objects:"Objects",symbols:"Symbols",flags:"Flags"},ru:{recent:"Недавно использованные",smileys:"Смайлы и люди",nature:"Животные и природа",food:"Еда и напитки",activities:"Активности",travel:"Путешествия и места",objects:"Объекты",symbols:"Символы",flags:"Флаги"}},this.uiLabels={en:{searchResults:"Search Results"},ru:{searchResults:"Результаты поиска"}},this.emojiData=Oe,this.emojiKeywords=We,this.recentEmojis=this.loadRecentEmojis(),this.batchSize=50,this.loadedIndices={},this.categorySections={},this.currentLanguage=localStorage.getItem("emojiPanelLanguage")||"en"}init(){return this.createPanel(),this.bindEvents(),this.loadAllEmojis(),this}createPanel(){this.container=document.createElement("div"),this.container.className="emoji-panel";const e=document.createElement("div");e.className="emoji-search-container",this.searchInput=document.createElement("input"),this.searchInput.type="search",this.searchInput.className="emoji-search",e.appendChild(this.searchInput),this.categoryNav=document.createElement("div"),this.categoryNav.className="emoji-categories",Object.entries(this.categories).forEach((([e,n])=>{const t=document.createElement("button");t.className="emoji-category-btn",t.dataset.category=e,t.innerHTML=n.icon,t.title=this.getLocalizedCategoryName(e),this.categoryNav.appendChild(t)})),this.emojiContainer=document.createElement("div"),this.emojiContainer.className="emoji-container",this.infoPanel=document.createElement("div"),this.infoPanel.className="emoji-info-panel",this.infoIcon=document.createElement("span"),this.infoIcon.className="emoji-info-icon",this.infoKeywords=document.createElement("span"),this.infoKeywords.className="emoji-info-keywords",this.infoPanel.appendChild(this.infoIcon),this.infoPanel.appendChild(this.infoKeywords),this.languageSelect=document.createElement("select"),this.languageSelect.className="emoji-language-select",this.languageSelect.innerHTML='\n      <option value="en">EN</option>\n      <option value="ru">RU</option>\n    ',this.languageSelect.value=this.currentLanguage;const n=document.createElement("div");n.className="emoji-footer",n.appendChild(this.infoPanel),n.appendChild(this.languageSelect),this.container.appendChild(e),this.container.appendChild(this.categoryNav),this.container.appendChild(this.emojiContainer),this.container.appendChild(n),this.options.container.appendChild(this.container),this.searchInput.focus()}loadAllEmojis(){this.emojiContainer.innerHTML="",this.loadedIndices={},this.categorySections={},Object.keys(this.categories).forEach((e=>{const n=document.createElement("div");n.className="emoji-category-section",n.id=`emoji-section-${e}`;const t=document.createElement("div");t.className="emoji-category-header",t.textContent=this.getLocalizedCategoryName(e),n.appendChild(t);const r=document.createElement("div");r.className="emoji-list",n.appendChild(r),this.emojiContainer.appendChild(n),this.loadedIndices[e]=0,this.categorySections[e]={section:n,emojiList:r,header:t},this.loadMoreEmojisForCategory(e)}))}loadMoreEmojisForCategory(e){const n="recent"===e?this.recentEmojis:this.emojiData[e]||[],t=this.loadedIndices[e],r=n.slice(t,t+this.batchSize);if(!r.length)return;const i=this.categorySections[e].emojiList;r.forEach((n=>{const t=document.createElement("button");t.className="emoji-btn",t.textContent=n,t.addEventListener("mouseenter",(()=>this.updateInfoPanel(n))),t.addEventListener("mouseleave",(()=>this.clearInfoPanel())),t.addEventListener("click",(t=>{t.stopPropagation(),t.shiftKey&&"recent"===e?(t.preventDefault(),this.removeFromRecent(n)):(this.addToRecent(n),this.options.onEmojiSelect(n),t.ctrlKey?(this.show(),this.searchInput.focus()):this.hide())})),i.appendChild(t)})),this.loadedIndices[e]+=r.length}searchEmojis(e){this.emojiContainer.innerHTML="";const n=document.createElement("div");n.className="emoji-category-section";const t=document.createElement("div");t.className="emoji-category-header",t.textContent=this.uiLabels[this.currentLanguage].searchResults,n.appendChild(t);const r=document.createElement("div");r.className="emoji-list",n.appendChild(r);const i=[];Object.keys(this.emojiData).forEach((n=>{(this.emojiData[n]||[]).forEach((n=>{const t=this.emojiKeywords[n]||{},r=Object.values(t).flat();(n.includes(e)||r.some((n=>n.toLowerCase().includes(e))))&&i.push(n)}))})),i.forEach((e=>{const n=document.createElement("button");n.className="emoji-btn",n.textContent=e,n.addEventListener("mouseenter",(()=>this.updateInfoPanel(e))),n.addEventListener("mouseleave",(()=>this.clearInfoPanel())),n.addEventListener("click",(n=>{n.stopPropagation(),this.addToRecent(e),this.options.onEmojiSelect(e),n.ctrlKey?(this.show(),this.searchInput.focus()):this.hide()})),r.appendChild(n)})),this.emojiContainer.appendChild(n)}bindEvents(){this._emojiKeydownHandler=e=>{"Escape"===e.key&&this.container.classList.contains("visible")&&this.hide()},document.addEventListener("keydown",this._emojiKeydownHandler),this._openPanelHandler=e=>{e.ctrlKey&&"Semicolon"===e.code&&(e.preventDefault(),this.container.classList.contains("visible")||this.show())},document.addEventListener("keydown",this._openPanelHandler),this._qKeydownHandler=e=>{if("KeyQ"===e.code){if(!this.container.classList.contains("visible"))return;if(document.activeElement===this.searchInput){const n=Date.now();this._lastQPressTime||(this._lastQPressTime=n),n-this._lastQPressTime<500?(e.preventDefault(),this.hide(),this._lastQPressTime=0):this._lastQPressTime=n}else e.preventDefault(),this.hide()}},document.addEventListener("keydown",this._qKeydownHandler),this.searchInput.addEventListener("input",(e=>{const n=e.target.value.trim().toLowerCase();n?(this.searchEmojis(n),this.emojiContainer.classList.add("search-active")):(this.loadAllEmojis(),this.emojiContainer.classList.remove("search-active"))})),this.searchInput.addEventListener("keydown",(e=>{if("Enter"===e.key&&(e.preventDefault(),this.emojiContainer.classList.contains("search-active"))){const n=this.emojiContainer.querySelector(".emoji-btn");if(n){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:e.ctrlKey});n.dispatchEvent(t),this.searchInput.value="",this.loadAllEmojis(),this.emojiContainer.classList.remove("search-active"),e.ctrlKey?(this.show(),this.searchInput.focus()):this.hide()}}})),this.categoryNav.addEventListener("click",(e=>{const n=e.target.closest(".emoji-category-btn");if(n){const e=n.dataset.category,t=document.getElementById(`emoji-section-${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}})),this.emojiContainer.addEventListener("scroll",(()=>this.handleScroll())),this.languageSelect.addEventListener("change",(e=>{this.currentLanguage=e.target.value,localStorage.setItem("emojiPanelLanguage",this.currentLanguage);const n=this.infoIcon.textContent;n&&this.updateInfoPanel(n),this.updateCategoryLabels(),this.searchInput.value.trim()&&this.searchEmojis(this.searchInput.value.trim().toLowerCase())})),this.container.addEventListener("click",(e=>{e.stopPropagation()}))}handleScroll(){Object.keys(this.categorySections).forEach((e=>{const{section:n}=this.categorySections[e],t=n.getBoundingClientRect(),r=this.emojiContainer.getBoundingClientRect();t.bottom<r.bottom+100&&this.loadMoreEmojisForCategory(e)}));let e=null,n=1/0;Object.keys(this.categorySections).forEach((t=>{const r=this.categorySections[t].header.getBoundingClientRect(),i=this.emojiContainer.getBoundingClientRect(),a=Math.abs(r.top-i.top);r.top<=i.top+10&&a<n&&(n=a,e=t)})),e&&this.highlightCategory(e)}updateCategoryLabels(){Object.keys(this.categories).forEach((e=>{const n=this.getLocalizedCategoryName(e),t=this.categoryNav.querySelector(`[data-category="${e}"]`);t&&(t.title=n),this.categorySections[e]&&this.categorySections[e].header&&(this.categorySections[e].header.textContent=n)}))}updateInfoPanel(e){this.infoIcon.textContent=e;const n=(this.emojiKeywords[e]||{})[this.currentLanguage]||[];this.infoKeywords.textContent=n.join(", ")}clearInfoPanel(){this.infoIcon.textContent="",this.infoKeywords.textContent=""}addToRecent(e){if(this.recentEmojis=[e,...this.recentEmojis.filter((n=>n!==e))].slice(0,25),this.saveRecentEmojis(),this.categorySections.recent){this.categorySections.recent.emojiList.innerHTML="",this.loadedIndices.recent=0,this.loadMoreEmojisForCategory("recent")}}removeFromRecent(e){if(this.recentEmojis=this.recentEmojis.filter((n=>n!==e)),this.saveRecentEmojis(),this.categorySections.recent){this.categorySections.recent.emojiList.innerHTML="",this.loadedIndices.recent=0,this.loadMoreEmojisForCategory("recent")}}loadRecentEmojis(){try{return JSON.parse(localStorage.getItem("recentEmojis"))||[]}catch{return[]}}saveRecentEmojis(){try{localStorage.setItem("recentEmojis",JSON.stringify(this.recentEmojis))}catch(e){console.error("Failed to save recent emojis:",e)}}highlightCategory(e){this.categoryNav.querySelectorAll(".emoji-category-btn").forEach((n=>{n.classList.toggle("active",n.dataset.category===e)}))}show(){this.container.classList.add("visible"),this._emojiKeydownHandler||(this._emojiKeydownHandler=e=>{"Escape"===e.key&&this.container.classList.contains("visible")&&this.hide()},document.addEventListener("keydown",this._emojiKeydownHandler)),this._qKeydownHandler||(this._qKeydownHandler=e=>{if("KeyQ"===e.code){if(!this.container.classList.contains("visible"))return;if(document.activeElement===this.searchInput){const n=Date.now();this._lastQPressTime||(this._lastQPressTime=n),n-this._lastQPressTime<500?(e.preventDefault(),this.hide(),this._lastQPressTime=0):this._lastQPressTime=n}else e.preventDefault(),this.hide()}},document.addEventListener("keydown",this._qKeydownHandler)),this.searchInput.focus()}hide(){document.removeEventListener("keydown",this._emojiKeydownHandler),document.removeEventListener("keydown",this._qKeydownHandler),this._emojiKeydownHandler=null,this._qKeydownHandler=null,this.container.classList.remove("visible"),this.searchInput.value="",this.emojiContainer.classList.contains("search-active")&&(this.loadAllEmojis(),this.emojiContainer.classList.remove("search-active"))}toggle(){this.container.classList.toggle("visible")}getLocalizedCategoryName(e){return this.categoryLabels[this.currentLanguage][e]||e}}class Qe{constructor(e={}){this.container=null,this.options={container:e.container||document.getElementById("messages-panel")}}init(){return this.createPanel(),this.bindEvents(),this.bindInputEvents(),this}createPanel(){this.container=document.createElement("div"),this.container.className="emoji-panel help-panel",this.content=document.createElement("div"),this.content.className="help-content",this.updatePanelContent(),this.container.appendChild(this.content),this.options.container&&this.options.container.appendChild(this.container),this.hide()}updatePanelContent(){const e={en:{heading:"Chat Commands & Hotkeys",sections:[{title:"Chat Commands",items:[{key:"/help",desc:"Show this help panel"},{key:"/pm username",desc:"Activate private messaging mode with the specified user"},{key:"/exit",desc:"Exit private messaging mode"}]},{title:"Chat Hotkeys",items:[{key:"Ctrl + Space",desc:"Hide/Show the chat"},{key:"Shift + Ctrl + Space",desc:"Expand/Collapse the chat"},{key:"Ctrl + Click on username",desc:"Activate private messaging mode with the clicked user (in chat messages)"}]},{heading:"Emoji Panel Actions & Hotkeys",subSections:[{title:"Emoji Panel Actions",items:[{key:"Click an emoji",desc:"Insert the emoji"},{key:"Click outside panel",desc:"Closes the panel (emoji or help)"}]},{title:"Emoji Panel Hotkeys",items:[{key:"Ctrl + ;",desc:"Open the Emoji Panel"},{key:"Enter",desc:"Insert the emoji"},{key:"Ctrl + Enter",desc:"Insert the emoji keeping the panel open"},{key:"Ctrl + Click",desc:"Insert the emoji keeping the panel open"},{key:"Shift + Click",desc:"Remove emoji from recent list (in recent category)"},{key:"q",desc:"Hide the Emoji Panel (single press when search is not focused)"},{key:"qq",desc:"Hide the Emoji Panel (double press 'q' when search is focused)"},{key:"Esc",desc:"Close the (emoji or help)"}]}]}]},ru:{heading:"Команды чата и горячие клавиши",sections:[{title:"Команды чата",items:[{key:"/help",desc:"Показать панель помощи"},{key:"/pm username",desc:"Активировать режим личных сообщений для указанного пользователя"},{key:"/exit",desc:"Выйти из режима личных сообщений"}]},{title:"Горячие клавиши чата",items:[{key:"Ctrl + Space",desc:"Скрыть/Показать чат"},{key:"Shift + Ctrl + Space",desc:"Развернуть/Свернуть чат"},{key:"Ctrl + Click on username",desc:"Активировать режим личных сообщений для выбранного пользователя (в сообщениях чата)"}]},{heading:"Действия и горячие клавиши панели эмодзи",subSections:[{title:"Действия панели эмодзи",items:[{key:"Click an emoji",desc:"Вставить эмодзи"},{key:"Click outside panel",desc:"Закрыть панель (эмодзи или помощь)"}]},{title:"Горячие клавиши панели эмодзи",items:[{key:"Ctrl + ;",desc:"Открыть панель эмодзи"},{key:"Enter",desc:"Вставить эмодзи"},{key:"Ctrl + Enter",desc:"Вставить эмодзи, оставив панель открытой"},{key:"Ctrl + Click",desc:"Вставить эмодзи, оставив панель открытой"},{key:"Shift + Click",desc:'Удалить эмодзи из списка "Недавно использованные"'},{key:"q",desc:"Скрыть панель эмодзи (одиночный нажим, когда поиск не в фокусе)"},{key:"qq",desc:"Скрыть панель эмодзи (дважды нажмите 'q', когда поиск в фокусе)"},{key:"Esc",desc:"Закрыть (эмодзи или помощь)"}]}]}]}}[localStorage.getItem("emojiPanelLanguage")||"en"];let n=`<h5 class="help-section-header">${e.heading}</h5>`;e.sections.forEach((e=>{e.title?n+=`<h6 class="help-section-subheader">${e.title}</h6>`:e.heading&&(n+=`<h5 class="help-section-header">${e.heading}</h5>`),e.items&&(n+='<ul class="help-list">',e.items.forEach((e=>{n+=`<li class="help-list-item"><strong class="help-hotkey">${e.key}</strong> ${e.desc}</li>`})),n+="</ul>"),e.subSections&&e.subSections.forEach((e=>{n+=`<h6 class="help-section-subheader">${e.title}</h6>`,n+='<ul class="help-list">',e.items.forEach((e=>{n+=`<li class="help-list-item"><strong class="help-hotkey">${e.key}</strong> ${e.desc}</li>`})),n+="</ul>"}))})),this.content.innerHTML=n}bindEvents(){this._globalClickHandler=()=>{this.hide()},document.addEventListener("click",this._globalClickHandler),this.container.addEventListener("click",(e=>{e.stopPropagation()})),this._globalKeydownHandler=e=>{"Escape"===e.key&&this.container.classList.contains("visible")&&this.hide()},document.addEventListener("keydown",this._globalKeydownHandler)}bindInputEvents(){const e=document.getElementById("message-input");e&&e.addEventListener("keydown",(n=>{"/help"===e.value.trim()&&"Space"===n.code&&(n.preventDefault(),this.activate(),e.value="")}))}show(){this.container.classList.add("visible"),this._globalClickHandler||(this._globalClickHandler=()=>{this.hide()},document.addEventListener("click",this._globalClickHandler)),this._globalKeydownHandler||(this._globalKeydownHandler=e=>{"Escape"===e.key&&this.container.classList.contains("visible")&&this.hide()},document.addEventListener("keydown",this._globalKeydownHandler))}hide(){document.removeEventListener("click",this._globalClickHandler),document.removeEventListener("keydown",this._globalKeydownHandler),this._globalClickHandler=null,this._globalKeydownHandler=null,this.container.classList.remove("visible")}activate(){this.updatePanelContent(),we("Help panel is shown",{type:"info",duration:3e3}),this.show()}static setupHelpCommandEvents(){const e=new Qe({container:document.getElementById("messages-panel")}).init(),n=document.getElementById("message-input");return n&&n.addEventListener("keydown",(t=>{"/help"===n.value.trim()&&"Space"===t.code&&(t.preventDefault(),e.activate(),n.value="")})),e}}var Ye=t(498),Xe={};Xe.styleTagTransform=h(),Xe.setAttributes=d(),Xe.insert=c().bind(null,"head"),Xe.domAPI=o(),Xe.insertStyleElement=p();i()(Ye.A,Xe);Ye.A&&Ye.A.locals&&Ye.A.locals;var Ge=t(21),Ze={};Ze.styleTagTransform=h(),Ze.setAttributes=d(),Ze.insert=c().bind(null,"head"),Ze.domAPI=o(),Ze.insertStyleElement=p();i()(Ge.A,Ze);Ge.A&&Ge.A.locals&&Ge.A.locals;function en(){if(function(){try{return window!==window.top}catch(e){return!0}}())return console.error("Application cannot run in an iframe"),!1;const e=new URLSearchParams(window.location.search);if("/g/"===window.location.pathname&&e.has("gmid"))return!1;if(window.location.href.includes("/gamelist/"))return function(){if(window.location.href.startsWith("https://klavogonki.ru/gamelist/"))try{const e=Array.from(document.scripts).find((e=>e.text.includes("PageData")));if(!e)throw new Error("PageData script not found");const n=e.text.match(/\.constant\('PageData', ([\s\S]*?})\)/)[1],t=JSON.parse(n.replace(/(\w+):/g,'"$1":').replace(/'/g,'"')),r=`${t.chatParams.user.id}#${t.chatParams.user.login}`,i=t.chatParams.pass;localStorage.getItem("klavoauth")||(localStorage.setItem("klavoauth",JSON.stringify({username:r,password:i})),setTimeout((()=>{window.location.href="https://klavogonki.ru"}),500))}catch(e){console.error("Auth error:",e),localStorage.removeItem("klavoauth"),alert(`Auth failed: ${e.message}\nPlease refresh the page.`)}}(),!1;return!!(localStorage.getItem("klavoauth")&&v.username&&v.password)||(localStorage.removeItem("klavoauth"),window.location.href="https://klavogonki.ru/gamelist/",!1)}!async function(){try{if(!en())return;ze(),function(){const e=document.getElementById("app-chat-container"),n=document.getElementById("chat-close-btn"),t=document.getElementById("chat-header");if(!e)return;const r=JSON.parse(localStorage.getItem("chatState"))||{},i=r.floating||!1,a=!1!==r.isVisible;i?(e.style.display=a?"flex":"none",e.style.opacity=a?"1":"0"):(e.classList.remove("visible-chat","hidden-chat"),e.classList.add(a?"visible-chat":"hidden-chat")),document.addEventListener("keydown",(e=>{e.ctrlKey&&e.shiftKey&&"Space"===e.code?(e.preventDefault(),Me()):e.ctrlKey&&"Space"===e.code&&(e.preventDefault(),Ie())})),n&&n.addEventListener("click",Ie),t&&t.addEventListener("dblclick",Ie)}(),document.addEventListener("mousedown",(e=>{if(!e.target.closest(".chat-drag-area"))return;const n=document.getElementById("app-chat-container");let t=ae();if(He=!0,Te=e.clientX,Pe=e.clientY,Ne=n.offsetLeft,Ae=parseInt(n.style.top)||n.getBoundingClientRect().top,!t.floating){const e=window.innerHeight-n.offsetHeight;n.style.top=e+"px",n.style.bottom="",t.top=e,t.floating=!0,n.classList.add("floating-chat"),ce(t)}document.body.style.userSelect="none"})),document.addEventListener("mousemove",(e=>{if(!He)return;const n=document.getElementById("app-chat-container"),t=window.innerWidth,r=window.innerHeight,i=e.clientX-Te,a=e.clientY-Pe,o=le(Ne+i,0,t-n.offsetWidth),s=le(Ae+a,0,r-n.offsetHeight);n.style.left=o+"px",n.style.top=s+"px";let c=ae();c.left=o,c.top=s,c.floating=!0,ce(c)})),document.addEventListener("mouseup",(()=>{if(!He)return;He=!1;const e=document.getElementById("app-chat-container"),n=window.innerWidth,t=window.innerHeight,r=e.getBoundingClientRect(),i=r.left<0||r.top<0||r.right>n||r.bottom>t,a=t-r.bottom<50;let o=ae();i||a?(e.style.top="",e.style.bottom="0",o.floating=!1,e.classList.remove("floating-chat")):(o.floating=!0,o.top=r.top,e.classList.add("floating-chat")),ce(o),document.body.style.userSelect=""})),document.addEventListener("mousedown",(e=>{const n=e.target.closest(".resize-handle");if(!n)return;De=!0,Je=n.classList[1];const t=document.getElementById("app-chat-container");Re=e.clientX,qe=e.clientY,Be=t.offsetWidth,Ke=t.offsetHeight,Ue=t.offsetLeft,_e=parseInt(t.style.top)||t.getBoundingClientRect().top,Fe=e.clientY-_e,document.body.style.userSelect="none"})),document.addEventListener("mousemove",(e=>{if(!De)return;const n=document.getElementById("app-chat-container"),t=window.innerWidth,r=window.innerHeight,i=getComputedStyle(document.documentElement),a=parseInt(i.getPropertyValue("--min-chat-width"))||250,o=parseInt(i.getPropertyValue("--min-chat-height"))||200;let s=ae();if("left"===Je){const r=Math.max(a,Be-(e.clientX-Re)),i=le(Ue+(e.clientX-Re),0,t-r);n.style.width=r+"px",n.style.left=i+"px",s.width=r,s.left=i}else if("right"===Je){const r=t-n.getBoundingClientRect().left,i=Math.min(r,Math.max(a,Be+(e.clientX-Re)));n.style.width=i+"px",s.width=i}const c=e.clientY-Fe;if("top"===Je)if(!1===s.floating){let e=le(c,0,r-o),t=r-e;n.style.top=e+"px",n.style.height=t+"px",s.top=e,s.height=t}else{let e=le(c,0,_e+Ke-o),t=Ke-(e-_e);t=Math.min(t,r),n.style.top=e+"px",n.style.height=t+"px",s.top=e,s.height=t}if("left"===Je||"right"===Je)if(!1===s.floating){let e=le(c,0,r-o),t=r-e;n.style.top=e+"px",n.style.height=t+"px",s.top=e,s.height=t}else{let e=le(c,0,_e+Ke-o),t=Ke-(e-_e);t=Math.min(t,r-e),n.style.top=e+"px",n.style.height=t+"px",s.top=e,s.height=t}n.offsetHeight>r&&(n.style.height=r+"px",!1===s.floating&&(n.style.top="0px",s.top=0),s.height=r),ce(s),re()})),document.addEventListener("mouseup",(()=>{De=!1,document.body.style.userSelect=""})),window.addEventListener("resize",(()=>{ie(),re()})),function(){const e=document.getElementById("messages-panel");if(!e)return;new MutationObserver((()=>{re(),D(),q(),ve()})).observe(e,{childList:!0,subtree:!0})}();const e=new Ce("user-list"),n=new Le("messages-panel",de(v.username)),t=function(e,n,t,r){return{userManager:n,messageManager:t,async connect(){try{const i=await e.connect();console.log("💬 Step 8: Joining chat room...");const a=`<body rid='${e.nextRid()}' sid='${i.sid}'\n                 xmlns='http://jabber.org/protocol/httpbind'>\n            <presence id='pres_1' xmlns='jabber:client' to='general@conference.jabber.klavogonki.ru/${r}'>\n              <x xmlns='http://jabber.org/protocol/muc'/>\n            </presence>\n          </body>`,o=await e.sendRequestWithRetry(a);console.log("📥 Join response:",o),n.updatePresence(o),t.processMessages(o);const s=`<body rid='${e.nextRid()}' sid='${i.sid}'\n                 xmlns='http://jabber.org/protocol/httpbind'>\n            <iq type='get' id='info1' xmlns='jabber:client' to='general@conference.jabber.klavogonki.ru'>\n              <query xmlns='http://jabber.org/protocol/disco#info'/>\n            </iq>\n          </body>`;await e.sendRequestWithRetry(s),setInterval((async()=>{const r=await e.sendRequestWithRetry(`<body rid='${e.nextRid()}' sid='${i.sid}' xmlns='http://jabber.org/protocol/httpbind'/>`);n.updatePresence(r),t.processMessages(r)}),5e3),console.log("🚀 Step 10: Connected! Starting presence updates...")}catch(e){console.error(`💥 Error: ${e.message}`)}},sendMessage(n){const i=`msg_${Date.now()}`;let a;Ee.isPrivateMode&&Ee.fullJid?(a=`\n          <body rid='${e.nextRid()}' sid='${e.sid}' xmlns='http://jabber.org/protocol/httpbind'>\n            <message from='${r}@jabber.klavogonki.ru/web' \n                     to='${Ee.fullJid}' \n                     type='chat' \n                     id='${i}' \n                     xmlns='jabber:client'>\n              <body>${n}</body>\n              <x xmlns='klavogonki:userdata'>\n                <user>\n                  <login>${r.replace(/^\d+#/,"")}</login>\n                  <avatar>/storage/avatars/${r.split("#")[0]}.png</avatar>\n                  <background>#7788cc</background>\n                </user>\n              </x>\n            </message>\n          </body>\n        `,t.addSentMessage(n,{isPrivate:!0,recipient:Ee.targetUsername})):(a=`\n          <body rid='${e.nextRid()}' sid='${e.sid}' xmlns='http://jabber.org/protocol/httpbind'>\n            <message to='general@conference.jabber.klavogonki.ru'\n                     type='groupchat'\n                     id='${i}'\n                     xmlns='jabber:client'>\n              <body>${n}</body>\n            </message>\n          </body>\n        `,t.addSentMessage(n)),e.sendRequestWithRetry(a).then((e=>{t.processMessages(e)})).catch(console.error)}}}(new E({username:v.username,password:v.password,bindUrl:b,delay:200}),e,n,v.username),r=document.getElementById("message-input"),i=()=>{const e=r.value.trim();e&&(t.sendMessage(e),r.value="",r.focus())};document.getElementById("send-button").addEventListener("click",i),r.addEventListener("keypress",(e=>"Enter"===e.key&&i()));const a=new Ve({container:document.querySelector(".input-container"),position:"top",onEmojiSelect:e=>{r.value+=e,r.focus(),a.hide()}}).init();document.querySelector(".emoji-trigger").addEventListener("click",(()=>{a.toggle()})),document.addEventListener("click",(e=>{e.target.closest(".emoji-panel")||e.target.closest(".emoji-trigger")||a.hide()})),function(){const e=document.getElementById("message-input");e&&(e.addEventListener("keydown",(e=>{"Escape"===e.key&&Ee.isPrivateMode&&(Se(),e.preventDefault())})),e.addEventListener("input",(()=>{je(e)})))}(),Qe.setupHelpCommandEvents(),await t.connect(),window.xmppClient=t,r.addEventListener("input",(function(e){je(e.target)}))}catch(e){console.error("App init error:",e),localStorage.removeItem("klavoauth"),window.location.href="https://klavogonki.ru/gamelist/"}}()})();